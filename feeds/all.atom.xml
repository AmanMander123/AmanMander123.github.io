<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>A Pelican Blog</title><link href="/" rel="alternate"></link><link href="/feeds/all.atom.xml" rel="self"></link><id>/</id><updated>2016-09-14T00:00:00+00:00</updated><entry><title>Titanic Dataset Visualization</title><link href="/titanic-dataset-visualization.html" rel="alternate"></link><published>2016-09-14T00:00:00+00:00</published><updated>2016-09-14T00:00:00+00:00</updated><author><name></name></author><id>tag:None,2016-09-14:/titanic-dataset-visualization.html</id><summary type="html">&lt;h1&gt;Link to Visualization&lt;/h1&gt;
&lt;p&gt;&lt;a href="http://bl.ocks.org/AmanMander123/raw/ebcf54644bd3672e5b14613318740eea/"&gt;Click here&lt;/a&gt;  &lt;/p&gt;
&lt;h1&gt;Summary&lt;/h1&gt;
&lt;p&gt;This visualization describes the percentage of passengers that surived during the Titanic disaster. The circles represent the susbet of passengers categorized by sex, passenger class and point of embarkation. The size of the circle corresponds to the percent value; the higher the proportion of …&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Link to Visualization&lt;/h1&gt;
&lt;p&gt;&lt;a href="http://bl.ocks.org/AmanMander123/raw/ebcf54644bd3672e5b14613318740eea/"&gt;Click here&lt;/a&gt;  &lt;/p&gt;
&lt;h1&gt;Summary&lt;/h1&gt;
&lt;p&gt;This visualization describes the percentage of passengers that surived during the Titanic disaster. The circles represent the susbet of passengers categorized by sex, passenger class and point of embarkation. The size of the circle corresponds to the percent value; the higher the proportion of survivers, the larger the circle.&lt;/p&gt;
&lt;h1&gt;Design&lt;/h1&gt;
&lt;p&gt;This purpose of this visualization is to elegantly convey relationships between the survival rates amongst different categories of passengers. This message is delivered with the size of each circle. The circles are lined up horizontally since the natural tendancy for most people is to glance at a visual from left to right. There is enough space in between each circle so that they don't overlap but close enough that they can all fit on a regular computer monitor screen. The radius of the circle is aligned with the square root of percentage of survivors so that each circle, then multiplied by a factor of 8 to make them large enough to be visible. This is a reasonable choice since the cirlces are large enough to be visible yet small enough for them all to fit on the a single screen. The colors of the circle and the text are paste blue and white, respectively. This combination was selected because it does not strain the eyes when looking at it for a long time. The font of the text is the standard sans-serif and the size of the font is small enough to fit within all of the circles, yet large enough to be readable. When hovering over each cirlce, the tooltip feature is used to display the labels. The labels states the category of the passengers and the associated survival rate, as well as the actual count of survivors. The color of box is light pink, which was selected due to its contrast with the blue circles. Both are easy on the eyes separately and when displayed together. Because of the slight opacity of the labels, font color was chosen to be black so that it can be clearly read. In order to create a visual separation between the categories, a vertical line is added between the sex, passenger class and port of embarkation categories.&lt;/p&gt;
&lt;h1&gt;Feedback&lt;/h1&gt;
&lt;h2&gt;Feedback 1&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Noticed that gender, passenger class and port of embarkation were being compared  &lt;/li&gt;
&lt;li&gt;Noticed that survival rate was higher in females than males and was correlated with passenger class  &lt;/li&gt;
&lt;li&gt;Suggestion was to use pastel palette instead of dark colors since they are too bright.&lt;br&gt;
    o   Circle color changed  &lt;/li&gt;
&lt;li&gt;Questioned as to the meaning of the port of embarkation letters&lt;br&gt;
    o   Addressed in the Data Story section  &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Feedback 2&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Noticed circles of different sizes lined across a horizontal line with labels  &lt;/li&gt;
&lt;li&gt;Noticed that hover certain circles are larger than others  &lt;/li&gt;
&lt;li&gt;Upon looking at the details while hovering over the circles, noticed that the size of the circle was related to the survival rate  &lt;/li&gt;
&lt;li&gt;Suggestion was to add a title so that it can be made more clear what we are looking at&lt;br&gt;
    o   Title added to visualization  &lt;/li&gt;
&lt;li&gt;Noticed that females had a higher survival rate than males, as well as a decreasing survival rate when moving from passenger class 1 to 2 to 3  &lt;/li&gt;
&lt;li&gt;Question was raised as to why Port C had a larger survival rate than the other ports&lt;br&gt;
    o   Addressed in the Data Story section  &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Feedback 3&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Noticed that there are different categories for survival rates: gender, passenger class and port of embarkation  &lt;/li&gt;
&lt;li&gt;Noticed that the size of the circle is used to visually convey the survival rates relative to each other  &lt;/li&gt;
&lt;li&gt;Noticed that females had the largest survival rate; even beating out those in passenger class one  &lt;/li&gt;
&lt;li&gt;A question was raised as to the meaning of point of embarkation&lt;br&gt;
    o   Since this issue came up 2nd time, text was added below the visualization that explained what the ports letters meant (S, C and Q → Southampton, Cherbourg, Queenstown)  &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Feedback 4&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Include the actual count of passengers in the tooltip under the percentage of survivors&lt;br&gt;
    o   Count of survivors added  &lt;/li&gt;
&lt;li&gt;Instead of using the actual percentage values for the radius, use the square root of the values&lt;br&gt;
    o   Changed  &lt;/li&gt;
&lt;li&gt;Separate the circles for the different categories&lt;br&gt;
    o   Vertical lines added between the categories to create separation  &lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Titanic Dataset – Story&lt;/h1&gt;
&lt;p&gt;In this visualization, the survival rate of the passengers was examined for the following categories:&lt;br&gt;
• Sex&lt;br&gt;
• Passenger Class&lt;br&gt;
• Point of Embarkation&lt;br&gt;
As we all know, there were a limited number of lifeboats that could only accommodate some of the passengers. These passengers that were boarded onto the lifeboats were selected by the crewmembers and there was a clear bias towards who got to board and who got left behind. The most obvious difference is the survival rate amongst males and females. Clearly, females were given priority in the lifeboat boarding process with a 74.20% survival rate amongst females, compared to a mere 18.89% survival rate amongst males. Another clear trend that we see in the survival rate is with the passenger class. The lower your class, the less chance you had at getting on a lifeboat and surviving the disaster. First class passengers had a survival rate of 62.96%, second class passengers had a survival rate of 47.28% and third class passengers had a survival rate of only 24.24%. This again makes sense since the first class passengers were more likely to be wealthy and treated better, thus the crewmembers giving the a higher priority at getting on the lifeboats. In terms of the Port of Embarkation, Ports S (Southampton), C (Cherbourg) and Q (Queenstown) had survival rates of 33.70%, 55.36% and 38.96%, respectively. Although Port C had a much higher survival rate and Ports S and Q had very similar survival rates, there is no clear indication as to why this may have happened. Some possibilities are that a larger number of first class passengers may have boarded from Port C, or could have boarded more females, or more families, or any other number of factors. This relationship can be explored with further analysis.&lt;/p&gt;</content></entry><entry><title>Identify Fraud from Enron Financial Statements</title><link href="/identify-fraud-from-enron-financial-statements.html" rel="alternate"></link><published>2016-07-09T00:00:00+00:00</published><updated>2016-07-09T00:00:00+00:00</updated><author><name></name></author><id>tag:None,2016-07-09:/identify-fraud-from-enron-financial-statements.html</id><summary type="html">&lt;h2&gt;Purpose&lt;/h2&gt;
&lt;p&gt;The goal of this project is to identify employees from Enron that have been in on the fraud committed that came to light in 2001. This will be based on a machine learning algorithm using public Enron financial and email information.  &lt;/p&gt;
&lt;h2&gt;Data Exploration&lt;/h2&gt;
&lt;p&gt;The dataset that will be used …&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Purpose&lt;/h2&gt;
&lt;p&gt;The goal of this project is to identify employees from Enron that have been in on the fraud committed that came to light in 2001. This will be based on a machine learning algorithm using public Enron financial and email information.  &lt;/p&gt;
&lt;h2&gt;Data Exploration&lt;/h2&gt;
&lt;p&gt;The dataset that will be used in this investigation to identify employees that may have committed fraud within Enron will be publicly available financial information. By breaking up the dataset into training and test sets and using our set of known POIs (Person Of Interest), we can use the features associated with each employee to identify whether or not they may be part of the fraud. This dataset contains a total of 146 points. Out of the 146 observations, 18 (12.3%) are POIs and 128 (87.7%) are therefore non-POIs. Each of the observations contains 21 features. Since this is a real-world dataset, not all of the features have attached values to them, hence showing up as NaNs. The list below provides the top 5 features the most missing values:
1. loan_advances: 142 NaNs
2. director_fees: 129 NaNs
3. restricted_stock_deferred: 128 NaNs
4. deferral_payments: 107 NaNs
5. deferred_income: 97 NaNs&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#Import libraries&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;warnings&lt;/span&gt;
&lt;span class="n"&gt;warnings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filterwarnings&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ignore&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;category&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ne"&gt;DeprecationWarning&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pickle&lt;/span&gt;
&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./tools/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;feature_format&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;featureFormat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;targetFeatureSplit&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;tester&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;dump_classifier_and_data&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.feature_selection&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;SelectKBest&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.pipeline&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Pipeline&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.preprocessing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;MinMaxScaler&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.preprocessing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;StandardScaler&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;tree&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.metrics&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;accuracy_score&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.grid_search&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;GridSearchCV&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.cross_validation&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;StratifiedShuffleSplit&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.decomposition&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;PCA&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.naive_bayes&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;GaussianNB&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.cross_validation&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;train_test_split&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;svm&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.svm&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;SVC&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;metrics&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;cross_validation&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;tester&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;test_classifier&lt;/span&gt;

&lt;span class="c1"&gt;### Features List&lt;/span&gt;
&lt;span class="c1"&gt;### The first feature must be &amp;quot;poi&amp;quot;.&lt;/span&gt;
&lt;span class="c1"&gt;### This features list contains all the features in the &lt;/span&gt;
&lt;span class="c1"&gt;### dataset (except email_address) &lt;/span&gt;

&lt;span class="n"&gt;features_list&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;poi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;deferral_payments&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="s1"&gt;&amp;#39;total_payments&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;loan_advances&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="s1"&gt;&amp;#39;bonus&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;restricted_stock_deferred&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="s1"&gt;&amp;#39;deferred_income&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;total_stock_value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="s1"&gt;&amp;#39;expenses&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;exercised_stock_options&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="s1"&gt;&amp;#39;other&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;long_term_incentive&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;restricted_stock&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="s1"&gt;&amp;#39;director_fees&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;to_messages&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  
                    &lt;span class="s1"&gt;&amp;#39;from_poi_to_this_person&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;from_messages&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="s1"&gt;&amp;#39;from_this_person_to_poi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;shared_receipt_with_poi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;bonus_salary_ratio&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;### Load the dictionary containing the dataset&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;final_project_dataset.pkl&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;data_file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;data_dict&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pickle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;#### DATA EXPLORATION ###&lt;/span&gt;

&lt;span class="c1"&gt;### Total number of data points&lt;/span&gt;
&lt;span class="n"&gt;number_of_data_points&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Number of data points: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;number_of_data_points&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;### Allocation across classes&lt;/span&gt;
&lt;span class="n"&gt;classes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;classes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;poi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="c1"&gt;### Total POI and non-POI observations in the dataset&lt;/span&gt;
&lt;span class="n"&gt;total_poi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;classes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;total_non_poi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;classes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;total_poi&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Total POIs: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_poi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Total non-POIs: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;total_non_poi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;### Percent of POIs in the dataset&lt;/span&gt;
&lt;span class="n"&gt;percent_of_poi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_poi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;total_poi&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total_non_poi&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Percent of POIs: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;percent_of_poi&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;### Number of features for each observation in the dataset&lt;/span&gt;
&lt;span class="n"&gt;number_of_features&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;number_of_features&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Number of features: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;number_of_features&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;### Check to see how many NaN&amp;#39;s are in each of the features&lt;/span&gt;
&lt;span class="c1"&gt;### Create list of all features&lt;/span&gt;
&lt;span class="n"&gt;all_features&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;))]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;### Convert list of features to dictionary and&lt;/span&gt;
&lt;span class="c1"&gt;### initialize values with 0&lt;/span&gt;
&lt;span class="n"&gt;feature_nan_count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;all_features&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;feature_nan_count&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="c1"&gt;### Count number of times an NaN occurs for each feature&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;NaN&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;feature_nan_count&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Number of NaNs for each feature: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;feature_nan_count&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Number of data points:  146
Total POIs:  18
Total non-POIs:  128
Percent of POIs:  12.32876712328767
Number of features:  [21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21]
Number of NaNs for each feature:  {&amp;#39;exercised_stock_options&amp;#39;: 44, &amp;#39;total_stock_value&amp;#39;: 20, &amp;#39;bonus&amp;#39;: 64, &amp;#39;deferred_income&amp;#39;: 97, &amp;#39;restricted_stock_deferred&amp;#39;: 128, &amp;#39;to_messages&amp;#39;: 60, &amp;#39;expenses&amp;#39;: 51, &amp;#39;from_this_person_to_poi&amp;#39;: 60, &amp;#39;poi&amp;#39;: 0, &amp;#39;long_term_incentive&amp;#39;: 80, &amp;#39;total_payments&amp;#39;: 21, &amp;#39;email_address&amp;#39;: 35, &amp;#39;from_messages&amp;#39;: 60, &amp;#39;restricted_stock&amp;#39;: 36, &amp;#39;deferral_payments&amp;#39;: 107, &amp;#39;shared_receipt_with_poi&amp;#39;: 60, &amp;#39;director_fees&amp;#39;: 129, &amp;#39;from_poi_to_this_person&amp;#39;: 60, &amp;#39;salary&amp;#39;: 51, &amp;#39;loan_advances&amp;#39;: 142, &amp;#39;other&amp;#39;: 53}
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Outlier Investigation&lt;/h2&gt;
&lt;p&gt;In order to scan for any potential outliers in the dataset, we first look at a scatterplot between the salary and bonus (Shown in the first plot below).&lt;br&gt;
Cleary, there is an outlier in the top-right corner of the plot that requires further examination. This point happens to be the ‘TOTAL’ line in the financial information that sums up the various financial metrics within our dataset. Since this observation does not correspond to an employee, it should be removed from the data. There is another observation in the dataset called ‘THE TRAVEL AGENCY IN THE PARK’ that also should be removed. After removing these 2 observations, we duplicate the plot above and notice that there are no points that are extremely different than the rest (Shown in the second plot below)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;### REMOVE OUTLIERS ###&lt;/span&gt;

&lt;span class="c1"&gt;### Create scatterplot of salary and bonus to detect &lt;/span&gt;
&lt;span class="c1"&gt;### any potential outliers&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;salary&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;bonus&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bonus&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bonus&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;salary&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bonus&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;### The outlier that we see in the above scatterplot is the&lt;/span&gt;
&lt;span class="c1"&gt;### TOTAL line that contains the sum of all the salary and&lt;/span&gt;
&lt;span class="c1"&gt;###  bonus values and needs to be removed&lt;/span&gt;
&lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;TOTAL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;### There is another outlier that needs to be removed&lt;/span&gt;
&lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;THE TRAVEL AGENCY IN THE PARK&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;### Create scatterplot of salary and bonus to ensure all outliers&lt;/span&gt;
&lt;span class="c1"&gt;### have been eliminated&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;salary&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;bonus&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bonus&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bonus&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;salary&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;bonus&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="/images/IdentifyFraudEnron_3_0.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/IdentifyFraudEnron_3_1.png"&gt;&lt;/p&gt;
&lt;h2&gt;Create New Feature&lt;/h2&gt;
&lt;p&gt;In an attempt to increase the accuracy of the algorithm to identify the POIs in the dataset, a new feature was created. This feature is the ratio between the bonus and the salary of each employee. The rationale behind this is that if an employee has an unusually large bonus to salary ratio, they must rely a lot more on their bonus than their salary for a higher income and would therefore be more inclined to engage in illegal or unethical behavior to boost company performance, which would then in turn lead to a higher bonus.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;### CREATE NEW FEATURE&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bonus&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;NaN&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; \
    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;NaN&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bonus_salary_ratio&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; \
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bonus&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;data_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bonus_salary_ratio&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;NaN&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;### Store to my_dataset for easy export below.&lt;/span&gt;
&lt;span class="n"&gt;my_dataset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_dict&lt;/span&gt;

&lt;span class="c1"&gt;### Extract features and labels from dataset for local testing&lt;/span&gt;
&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;featureFormat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;my_dataset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;features_list&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sort_keys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;features&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;targetFeatureSplit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Feature Selection&lt;/h2&gt;
&lt;p&gt;The features used in the algorithm were determined using the SelectKBest method.&lt;br&gt;
It was determined that K = 5 and K = 6 have the highest accuracy, precision and recall scores. In order to avoid over fitting the model, it is better to go with the model with less features given equal performance. The output below outlines which features were selected for the final algorithm along with their scores.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;### Select K best features&lt;/span&gt;
&lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;
&lt;span class="n"&gt;skb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;SelectKBest&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;### Feature Importance&lt;/span&gt;
&lt;span class="n"&gt;skb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;features&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;scores&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log10&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;skb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pvalues_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;scores&lt;/span&gt; &lt;span class="o"&gt;/=&lt;/span&gt; &lt;span class="n"&gt;scores&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;indices&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argsort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scores&lt;/span&gt;&lt;span class="p"&gt;)[::&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;feature no. {}: {} ({})&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;features_list&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;indices&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;scores&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;indices&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]]))&lt;/span&gt;
&lt;span class="n"&gt;updated_features_list&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;features_list&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;indices&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;updated_features_list&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;poi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Updated features list: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;updated_features_list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;feature no. 1: exercised_stock_options (1.0)
feature no. 2: total_stock_value (0.978860444846489)
feature no. 3: bonus (0.863725845607769)
feature no. 4: salary (0.7767175626081195)
feature no. 5: deferred_income (0.528756607360408)
Updated features list:  [&amp;#39;poi&amp;#39;, &amp;#39;exercised_stock_options&amp;#39;, &amp;#39;total_stock_value&amp;#39;, &amp;#39;bonus&amp;#39;, &amp;#39;salary&amp;#39;, &amp;#39;deferred_income&amp;#39;]
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Feature Scaling&lt;/h2&gt;
&lt;p&gt;The algorithm was tested by applying a Min-Max Scaler. It turns out that the accuracy, precision and recall scores remain the same with the deployment of feature scaling. This means that featuring scaling did not add to better performance of our model. Since the purpose of feature scaling is to normalize the feature values, it turns out in our case that the large range of the values plays a crucial role in separating the POIs from the non-POIs. Therefore, feature scaling was not used in the final algorithm.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;### FEATURE SCALING&lt;/span&gt;

&lt;span class="c1"&gt;### Initialize Standard and Min-Max Scaler&lt;/span&gt;
&lt;span class="n"&gt;Standard_scaler&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;StandardScaler&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;Min_Max_scaler&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;MinMaxScaler&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Algorithm Selection and Paramter Tuning&lt;/h2&gt;
&lt;p&gt;The algorithm that I ended up using to classify POIs and non-POIs was the Gaussian Naïve Bayes algorithm. The other algorithm that I tried was the Decision Tree Classifier.&lt;br&gt;
Tuning the parameters of an algorithm simply means going through the process of optimizing the parameters of your algorithm that provides the best performance. In our case, this means selecting the parameters of our algorithm that maximize the accuracy, precision or recall scores in the classification of POIs and non-POIs. If the parameters are not tuned correctly, the algorithm will not perform optimally and thus have a higher likelihood of misclassifying the labels correctly. I used parameter tuning for the Decision Tree Classifier in order to ensure the most accurate model was utilized.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;### ALGORITHM SELECTION&lt;/span&gt;

&lt;span class="c1"&gt;### Naive Bayes&lt;/span&gt;
&lt;span class="c1"&gt;#clf = Pipeline(steps=[(&amp;quot;scaling&amp;quot;, Min_Max_scaler),(&amp;quot;NaiveBayes&amp;quot;,GaussianNB())])&lt;/span&gt;
&lt;span class="n"&gt;clf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Pipeline&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;steps&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;NaiveBayes&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;GaussianNB&lt;/span&gt;&lt;span class="p"&gt;())])&lt;/span&gt;

&lt;span class="c1"&gt;### Decision Tree&lt;/span&gt;
&lt;span class="c1"&gt;# tree = tree.DecisionTreeClassifier()&lt;/span&gt;
&lt;span class="c1"&gt;# parameters = {&amp;#39;tree__criterion&amp;#39;: (&amp;#39;gini&amp;#39;,&amp;#39;entropy&amp;#39;),&lt;/span&gt;
&lt;span class="c1"&gt;#               &amp;#39;tree__splitter&amp;#39;:(&amp;#39;best&amp;#39;,&amp;#39;random&amp;#39;),&lt;/span&gt;
&lt;span class="c1"&gt;#               &amp;#39;tree__min_samples_split&amp;#39;:[2, 10, 20],&lt;/span&gt;
&lt;span class="c1"&gt;#                 &amp;#39;tree__max_depth&amp;#39;:[10,15,20,25,30],&lt;/span&gt;
&lt;span class="c1"&gt;#                 &amp;#39;tree__max_leaf_nodes&amp;#39;:[5,10,30]}&lt;/span&gt;
&lt;span class="c1"&gt;# #pipeline = Pipeline(steps=[(&amp;#39;scaler&amp;#39;, Min_Max_scaler), (&amp;#39;pca&amp;#39;,PCA(n_components = 2)), (&amp;#39;tree&amp;#39;, tree)])&lt;/span&gt;
&lt;span class="c1"&gt;# pipeline = Pipeline(steps=[(&amp;#39;scaler&amp;#39;, Min_Max_scaler), (&amp;#39;tree&amp;#39;, tree)])&lt;/span&gt;
&lt;span class="c1"&gt;# #pipeline = Pipeline(steps=[(&amp;#39;tree&amp;#39;, tree)])&lt;/span&gt;

&lt;span class="c1"&gt;# cv = StratifiedShuffleSplit(labels, 100, random_state = 42)&lt;/span&gt;
&lt;span class="c1"&gt;# gs = GridSearchCV(pipeline, parameters, cv=cv, scoring=&amp;#39;accuracy&amp;#39;)&lt;/span&gt;
&lt;span class="c1"&gt;# gs.fit(features, labels)&lt;/span&gt;
&lt;span class="c1"&gt;# clf = gs.best_estimator_&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Validation and Evaluation&lt;/h2&gt;
&lt;p&gt;Validation is the process in which we use a subset of our training data to tune the parameters of the algorithm. If this step is done incorrectly, you run the risk of over fitting your model that will perform very good on the training set but will do very poorly on the test set. For my algorithm, I used the StratifiedShuffleSplit function to split the data into training and tests for validation purposes.&lt;br&gt;
I evaluated by algorithm based on the precision and recall scores. For my algorithm, I was able to achieve an accuracy, precision and recall scores of 0.85, 0.49 and 0.38, respectively. Precision refers to the probability that an employee identified as a POI is actually a POI and recall refers to the probability of my algorithm in positively identifying a POI.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;### VALIDATION AND EVALUATION&lt;/span&gt;

&lt;span class="n"&gt;test_classifier&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;clf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;my_dataset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;updated_features_list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Pipeline(steps=[(&amp;#39;NaiveBayes&amp;#39;, GaussianNB(priors=None))])
    Accuracy: 0.85464   Precision: 0.48876  Recall: 0.38050 F1: 0.42789 F2: 0.39814
    Total predictions: 14000    True positives:  761    False positives:  796   False negatives: 1239   True negatives: 11204
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Financial Contributions to the 2016 Presidential Campaigns from NY</title><link href="/financial-contributions-to-the-2016-presidential-campaigns-from-ny.html" rel="alternate"></link><published>2016-05-17T00:00:00+00:00</published><updated>2016-05-17T00:00:00+00:00</updated><author><name></name></author><id>tag:None,2016-05-17:/financial-contributions-to-the-2016-presidential-campaigns-from-ny.html</id><summary type="html">&lt;p&gt;========================================================&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Load&lt;/span&gt;&lt;span class="x"&gt; libraries&lt;/span&gt;
&lt;span class="x"&gt;library(ggplot2)&lt;/span&gt;
&lt;span class="x"&gt;library(lubridate)&lt;/span&gt;
&lt;span class="x"&gt;library(dplyr)&lt;/span&gt;
&lt;span class="x"&gt;library(tidyr)&lt;/span&gt;
&lt;span class="x"&gt;library(gridExtra)&lt;/span&gt;
&lt;span class="x"&gt;library(psych)&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Load the Data&lt;/span&gt;
&lt;span class="x"&gt;data = read.csv(&amp;#39;NYContributionData.csv&amp;#39;, row.names = NULL)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Convert&lt;/span&gt;&lt;span class="x"&gt; dates from integers to DD-MM-YYYY format&lt;/span&gt;
&lt;span class="x"&gt;data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt; = dmy(data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Univariate Plots Section&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Summarize the data set&lt;/span&gt;
&lt;span class="x"&gt;dim(data)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] 186976     18&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;names …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;========================================================&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Load&lt;/span&gt;&lt;span class="x"&gt; libraries&lt;/span&gt;
&lt;span class="x"&gt;library(ggplot2)&lt;/span&gt;
&lt;span class="x"&gt;library(lubridate)&lt;/span&gt;
&lt;span class="x"&gt;library(dplyr)&lt;/span&gt;
&lt;span class="x"&gt;library(tidyr)&lt;/span&gt;
&lt;span class="x"&gt;library(gridExtra)&lt;/span&gt;
&lt;span class="x"&gt;library(psych)&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Load the Data&lt;/span&gt;
&lt;span class="x"&gt;data = read.csv(&amp;#39;NYContributionData.csv&amp;#39;, row.names = NULL)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Convert&lt;/span&gt;&lt;span class="x"&gt; dates from integers to DD-MM-YYYY format&lt;/span&gt;
&lt;span class="x"&gt;data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt; = dmy(data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Univariate Plots Section&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Summarize the data set&lt;/span&gt;
&lt;span class="x"&gt;dim(data)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] 186976     18&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;names(data)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  [1] &amp;quot;cmte_id&amp;quot;           &amp;quot;cand_id&amp;quot;           &amp;quot;cand_nm&amp;quot;          &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  [4] &amp;quot;contbr_nm&amp;quot;         &amp;quot;contbr_city&amp;quot;       &amp;quot;contbr_st&amp;quot;        &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  [7] &amp;quot;contbr_zip&amp;quot;        &amp;quot;contbr_employer&amp;quot;   &amp;quot;contbr_occupation&amp;quot;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [10] &amp;quot;contb_receipt_amt&amp;quot; &amp;quot;contb_receipt_dt&amp;quot;  &amp;quot;receipt_desc&amp;quot;     &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [13] &amp;quot;memo_cd&amp;quot;           &amp;quot;memo_text&amp;quot;         &amp;quot;form_tp&amp;quot;          &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [16] &amp;quot;file_num&amp;quot;          &amp;quot;tran_id&amp;quot;           &amp;quot;election_tp.&amp;quot;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;str(data)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; &amp;#39;data.frame&amp;#39;:    186976 obs. of  18 variables:&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ cmte_id          : Factor w/ 24 levels &amp;quot;C00458844&amp;quot;,&amp;quot;C00500587&amp;quot;,..: 7 7 7 7 7 7 7 7 7 7 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ cand_id          : Factor w/ 24 levels &amp;quot;P00003392&amp;quot;,&amp;quot;P20002671&amp;quot;,..: 12 12 12 12 12 12 12 12 12 12 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ cand_nm          : Factor w/ 24 levels &amp;quot;Bush, Jeb&amp;quot;,&amp;quot;Carson, Benjamin S.&amp;quot;,..: 19 19 19 19 19 19 19 19 19 19 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ contbr_nm        : Factor w/ 44582 levels &amp;quot;AABO, TORBEN&amp;quot;,..: 5418 2501 2505 2758 13532 13611 13611 3910 3912 40476 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ contbr_city      : Factor w/ 1475 levels &amp;quot;&amp;quot;,&amp;quot; BROOKLYN&amp;quot;,..: 1062 907 164 907 597 91 91 907 1116 164 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ contbr_st        : Factor w/ 1 level &amp;quot;NY&amp;quot;: 1 1 1 1 1 1 1 1 1 1 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ contbr_zip       : Factor w/ 34760 levels &amp;quot;&amp;quot;,&amp;quot;`1136&amp;quot;,&amp;quot;0&amp;quot;,..: 30963 433 18042 2536 28006 23274 23274 7059 33689 20679 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ contbr_employer  : Factor w/ 17710 levels &amp;quot;&amp;quot;,&amp;quot; SPARTAN HEALTH SCIENCE UNIVERSITY&amp;quot;,..: 3133 5841 4727 13900 14010 10897 10897 10897 13945 10897 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ contbr_occupation: Factor w/ 8123 levels &amp;quot;&amp;quot;,&amp;quot; ADMINISTRATIVE ASSISTANT&amp;quot;,..: 5776 3359 6609 2936 4766 6561 6561 4896 583 4896 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ contb_receipt_amt: num  50 250 50 50 12.5 10 10 50 31 15 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ contb_receipt_dt : POSIXct, format: &amp;quot;2016-02-29&amp;quot; &amp;quot;2016-02-29&amp;quot; ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ receipt_desc     : Factor w/ 22 levels &amp;quot;&amp;quot;,&amp;quot; SEE REATTRIBUTION&amp;quot;,..: 1 1 1 1 1 1 1 1 1 1 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ memo_cd          : Factor w/ 2 levels &amp;quot;&amp;quot;,&amp;quot;X&amp;quot;: 1 1 1 1 1 1 1 1 1 1 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ memo_text        : Factor w/ 131 levels &amp;quot;&amp;quot;,&amp;quot; SEE REATTRIBUTION&amp;quot;,..: 4 4 4 4 4 4 4 4 4 4 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ form_tp          : Factor w/ 3 levels &amp;quot;SA17A&amp;quot;,&amp;quot;SA18&amp;quot;,..: 1 1 1 1 1 1 1 1 1 1 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ file_num         : int  1056899 1056899 1056899 1056899 1056899 1056899 1056899 1056899 1056899 1056899 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ tran_id          : Factor w/ 186708 levels &amp;quot;A00136D649BB94F13985&amp;quot;,..: 135800 137048 136618 136940 137691 136071 136209 136564 137978 143966 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  $ election_tp.     : Factor w/ 4 levels &amp;quot;&amp;quot;,&amp;quot;G2016&amp;quot;,&amp;quot;P2016&amp;quot;,..: 3 3 3 3 3 3 3 3 3 3 ...&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;levels(data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;cand_nm&lt;/span&gt;&lt;span class="x"&gt;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  [1] &amp;quot;Bush, Jeb&amp;quot;                 &amp;quot;Carson, Benjamin S.&amp;quot;      &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  [3] &amp;quot;Christie, Christopher J.&amp;quot;  &amp;quot;Clinton, Hillary Rodham&amp;quot;  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  [5] &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot; &amp;quot;Fiorina, Carly&amp;quot;           &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  [7] &amp;quot;Gilmore, James S IIII&amp;quot;     &amp;quot;Graham, Lindsey O.&amp;quot;       &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  [9] &amp;quot;Huckabee, Mike&amp;quot;            &amp;quot;Jindal, Bobby&amp;quot;            &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [11] &amp;quot;Johnson, Gary&amp;quot;             &amp;quot;Kasich, John R.&amp;quot;          &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [13] &amp;quot;Lessig, Lawrence&amp;quot;          &amp;quot;O&amp;#39;Malley, Martin Joseph&amp;quot;  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [15] &amp;quot;Pataki, George E.&amp;quot;         &amp;quot;Paul, Rand&amp;quot;               &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [17] &amp;quot;Perry, James R. (Rick)&amp;quot;    &amp;quot;Rubio, Marco&amp;quot;             &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [19] &amp;quot;Sanders, Bernard&amp;quot;          &amp;quot;Santorum, Richard J.&amp;quot;     &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [21] &amp;quot;Stein, Jill&amp;quot;               &amp;quot;Trump, Donald J.&amp;quot;         &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [23] &amp;quot;Walker, Scott&amp;quot;             &amp;quot;Webb, James Henry Jr.&amp;quot;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;summary(data)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;       cmte_id           cand_id                           cand_nm     &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  C00577130:95454   P60007168:95454   Sanders, Bernard         :95454  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  C00575795:59789   P00003392:59789   Clinton, Hillary Rodham  :59789  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  C00574624:11764   P60006111:11764   Cruz, Rafael Edward &amp;#39;Ted&amp;#39;:11764  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  C00573519: 6614   P60005915: 6614   Carson, Benjamin S.      : 6614  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  C00458844: 4678   P60006723: 4678   Rubio, Marco             : 4678  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  C00579458: 2419   P60008059: 2419   Bush, Jeb                : 2419  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  (Other)  : 6258   (Other)  : 6258   (Other)                  : 6258  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                     contbr_nm         contbr_city    contbr_st  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  SWIRE, JAMES BENNETT MR.:   143   NEW YORK :55572   NY:186976  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  SWIRE, JAMES B. MR.     :   136   BROOKLYN :22940              &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  PERE, RENE              :   120   BRONX    : 3720              &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  FISHER, MICHAEL         :   115   ROCHESTER: 3083              &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  DOWD, KATIE             :   113   BUFFALO  : 2339              &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  DYCKMAN, MICHAEL MR.    :   107   ITHACA   : 2170              &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  (Other)                 :186242   (Other)  :97152              &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;      contbr_zip          contbr_employer      contbr_occupation &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  108052128:   355   RETIRED      : 14464   NOT EMPLOYED: 24054  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  10024    :   235   NONE         : 14243   RETIRED     : 21165  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  10023    :   195   NOT EMPLOYED : 13272   ATTORNEY    :  6836  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  10025    :   189   SELF-EMPLOYED: 11155   TEACHER     :  4030  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  10128    :   186   N/A          : 10520   PROFESSOR   :  3274  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  11377    :   168   (Other)      :123176   (Other)     :127588  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  (Other)  :185648   NA&amp;#39;s         :   146   NA&amp;#39;s        :    29  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  contb_receipt_amt contb_receipt_dt             &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  Min.   :  -5400   Min.   :2013-10-11 00:00:00  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  1st Qu.:     15   1st Qu.:2015-11-30 00:00:00  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  Median :     35   Median :2016-02-10 00:00:00  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  Mean   :    290   Mean   :2016-01-08 05:43:43  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  3rd Qu.:    100   3rd Qu.:2016-03-09 00:00:00  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  Max.   :4904861   Max.   :2016-03-31 00:00:00  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                                                 &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                      receipt_desc    memo_cd   &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                            :184468    :178404  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  Refund                    :  1284   X:  8572  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  REDESIGNATION TO GENERAL  :   248             &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  REDESIGNATION FROM PRIMARY:   246             &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  REATTRIBUTION FROM SPOUSE :   145             &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  REATTRIBUTION TO SPOUSE   :   145             &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  (Other)                   :   440             &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                                memo_text      form_tp      &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  * EARMARKED CONTRIBUTION: SEE BELOW:90567   SA17A:178223  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                                     :87099   SA18 :  7469  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  * HILLARY VICTORY FUND             : 7368   SB28A:  1284  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  EARMARKED FROM MAKE DC LISTEN      :  251                 &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  REDESIGNATION TO GENERAL           :  248                 &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  REDESIGNATION FROM PRIMARY         :  246                 &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  (Other)                            : 1197                 &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;     file_num                       tran_id       election_tp.  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  Min.   :1003942   A7A8C99C570A941E08F1:     2        :    49  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  1st Qu.:1056807   A8E6DF66C036B4EA89D5:     2   G2016:  1425  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  Median :1057425   C1013282            :     2   P2016:185499  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  Mean   :1056172   C1014914            :     2   P2020:     3  &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  3rd Qu.:1066337   C1022783            :     2                 &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;  Max.   :1066448   C1023143            :     2                 &lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                    (Other)             :186964&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The dataset contains 186,976 observations with 18 dimensions. There are
24 distinct Presidential Candidates to whom the contributions were made.
Majority of the number of contibutions were made to Bernard Sanders,
followed by Hillary Clinton and Ted Cruz. Mr. James Bennett Swire made
the most number of contributions. Those not employed and retired made
more contributions than contributors from any one particular occupation.
The average contibution amount was \$290, with a maximum of
\$4,904,861.&lt;br&gt;
Let's first look at the distribution of the contributions amounts.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;qplot(contb_receipt_amt, data = data, binwidth = 100000)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-1-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;This plot does not give much information since the contribution range is
very large. Since the median and mean contribution is \$35 and \$290,
respectively, we can gain more insight by narrowing the range of the
distribution between \$0 to \$1000.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;qplot(contb_receipt_amt, data = data, binwidth = 50) +
      coord_cartesian(xlim = c(0,1000))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-2-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Even with this much smaller range, the dispsersion is quite large. By
looking at this range, we can conclude that we have a right-skewed
distribution.Another way to get a better understanding of contibution
amounts is to transform the data using a log transform and narrowing our
view to where majority of the values lie.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;qplot(contb_receipt_amt, data = subset(data, contb_receipt_amt &amp;gt; 0), 
      binwidth = 0.2) + 
      scale_x_log10(breaks = c(10,100,1000,10000)) + 
      coord_cartesian(xlim = c(1,10000))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-3-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Although not perfectly normal, the log transformed plot is much less
skewed.&lt;/p&gt;
&lt;h1&gt;Univariate Analysis&lt;/h1&gt;
&lt;h3&gt;What is the structure of your dataset?&lt;/h3&gt;
&lt;p&gt;There are 186,976 observations in the dataset with 18 features:&lt;br&gt;
Committee ID&lt;br&gt;
Candidate ID&lt;br&gt;
Candidate Name&lt;br&gt;
Contibutor Name&lt;br&gt;
Contributor City&lt;br&gt;
Contributor State&lt;br&gt;
Contributor Zip Code&lt;br&gt;
Contributor Employer&lt;br&gt;
Contributor Occupation&lt;br&gt;
Contribution Receipt Amount&lt;br&gt;
Contribution Receipt Date&lt;br&gt;
Receipt Description&lt;br&gt;
Memo Code&lt;br&gt;
Memo Text&lt;br&gt;
Form Type&lt;br&gt;
File Number&lt;br&gt;
Transaction ID&lt;br&gt;
Election Type / Primary General Indicator&lt;br&gt;
All of these are factors except for the Contribution Receipt Amount,
Contribution Receipt Date and File Number.&lt;/p&gt;
&lt;h3&gt;What is/are the main feature(s) of interest in your dataset?&lt;/h3&gt;
&lt;p&gt;The main features in the dataset are the Candidate Name and Contribution
Receipt Amount.&lt;br&gt;
I am interested in seeing which candidate got the most and largest
contributions.&lt;/p&gt;
&lt;h3&gt;What other features in the dataset do you think will help support your&lt;/h3&gt;
&lt;h3&gt;investigation into your feature(s) of interest?&lt;/h3&gt;
&lt;p&gt;Other features in the dataset that are of particular interest are the
Contributor City and Occupation, and Contribution Receipt Date. I am
interested in seeing if there are any recurring Contributor Occupations
contributing to any particular candidate as well as the trends over
time.&lt;/p&gt;
&lt;h3&gt;Did you create any new variables from existing variables in the dataset?&lt;/h3&gt;
&lt;p&gt;I did not create any new variables in the dataset.&lt;/p&gt;
&lt;h3&gt;Of the features you investigated, were there any unusual distributions?&lt;/h3&gt;
&lt;h3&gt;Did you perform any operations on the data to tidy, adjust,&lt;/h3&gt;
&lt;h3&gt;or change the form of the data?&lt;/h3&gt;
&lt;h3&gt;If so, why did you do this?&lt;/h3&gt;
&lt;p&gt;I log-transformed the right-skewed Contribution Receipt Amount. I did
this because I noticed that most of the values were very small (under
\$100), but there were some values that extended well beyond \$1M and
several values in between the \$100 and \$1M range. Log-transforming the
data allowed me to see all the values in one graph, but this resulted in
the refunded values being left out.&lt;/p&gt;
&lt;h1&gt;Bivariate Plots Section&lt;/h1&gt;
&lt;p&gt;Before looking into how the contributions are divided up amongst the
demographics and who they going to,let's first look at total
contributions to all candidates by date.&lt;br&gt;
The following plot aggregates total contributions from all contributors
to all candidates by month.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Subset&lt;/span&gt;&lt;span class="x"&gt; data containing date and contribution amount columns only&lt;/span&gt;
&lt;span class="x"&gt;date_cont_data = data[,c(&amp;quot;contb_receipt_dt&amp;quot;, &amp;quot;contb_receipt_amt&amp;quot;)]&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Floor&lt;/span&gt;&lt;span class="x"&gt; the dates to the first of each month&lt;/span&gt;
&lt;span class="x"&gt;floored_data = date_cont_data&lt;/span&gt;
&lt;span class="x"&gt;floored_data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt; = floor_date(floored_data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt;, &lt;/span&gt;
&lt;span class="x"&gt;                                           &amp;quot;month&amp;quot;)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Aggregate&lt;/span&gt;&lt;span class="x"&gt; the contribution amounts based on contribution date&lt;/span&gt;
&lt;span class="x"&gt;agg_date_data = aggregate(contb_receipt_amt ~ contb_receipt_dt, &lt;/span&gt;
&lt;span class="x"&gt;                          data = floored_data, FUN = sum)&lt;/span&gt;
&lt;span class="x"&gt;ggplot(data = agg_date_data, aes(x = contb_receipt_dt, &lt;/span&gt;
&lt;span class="x"&gt;                                 y = contb_receipt_amt)) + &lt;/span&gt;
&lt;span class="x"&gt;        geom_line()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-4-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;As one would guess, the total contributions have generally increased per
month as we get closer to the election. Since the contritions made
before Jan-2015 were minimal, it would be more appropriate to leave out
the dates before Jan-2015.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ggplot(data = agg_date_data, aes(x = contb_receipt_dt, 
                                 y = contb_receipt_amt)) + 
  geom_line() +
  coord_cartesian(xlim = c(ymd(&amp;quot;2015-01-01&amp;quot;), ymd(&amp;quot;2016-03-01&amp;quot;)))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-5-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;We see that overall trend is an increase in contributions with time,
with some dips in between. This is expected since we expect the
contributions will increase as the election approaches but each month's
contributions do not necessarily have t exceed the contributions made in
the previous months.&lt;br&gt;
Next, let's see if there is any correlation in the contributions made to
the top 6 candidates.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Subset&lt;/span&gt;&lt;span class="x"&gt; data containing candidate name, contribution date and amount&lt;/span&gt;
&lt;span class="x"&gt;cand_date_cont_data = data[,c(&amp;quot;cand_nm&amp;quot;, &amp;quot;contb_receipt_dt&amp;quot;, &lt;/span&gt;
&lt;span class="x"&gt;                              &amp;quot;contb_receipt_amt&amp;quot;)]&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Floor&lt;/span&gt;&lt;span class="x"&gt; the dates to the first of each month&lt;/span&gt;
&lt;span class="x"&gt;floored_data = cand_date_cont_data&lt;/span&gt;
&lt;span class="x"&gt;floored_data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt; = floor_date(floored_data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt;, &lt;/span&gt;
&lt;span class="x"&gt;                                           &amp;quot;month&amp;quot;)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Aggregate&lt;/span&gt;&lt;span class="x"&gt; the contribtution amounts based on candidate name &lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;and&lt;/span&gt;&lt;span class="x"&gt; contribution date&lt;/span&gt;
&lt;span class="x"&gt;agg_date_data = aggregate(contb_receipt_amt ~ cand_nm + contb_receipt_dt, &lt;/span&gt;
&lt;span class="x"&gt;                          data = floored_data, FUN = sum)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Subset&lt;/span&gt;&lt;span class="x"&gt; the aggregated data for desired candidates&lt;/span&gt;
&lt;span class="x"&gt;agg_date_subset_data = subset(agg_date_data, cand_nm %in% &lt;/span&gt;
&lt;span class="x"&gt;                                        c(&amp;quot;Sanders, Bernard&amp;quot;, &lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Clinton, Hillary Rodham&amp;quot;,&lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, &lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Carson, Benjamin S.&amp;quot;,&lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;))&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Spread&lt;/span&gt;&lt;span class="x"&gt; the candidate name across multiple columns&lt;/span&gt;
&lt;span class="x"&gt;agg_date_subset_data_spread = spread(agg_date_subset_data, cand_nm, &lt;/span&gt;
&lt;span class="x"&gt;                                     contb_receipt_amt)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Remove&lt;/span&gt;&lt;span class="x"&gt; the date column from the dataset&lt;/span&gt;
&lt;span class="x"&gt;agg_date_subset_data_spread_date_removed = &lt;/span&gt;
&lt;span class="x"&gt;                    subset(agg_date_subset_data_spread, &lt;/span&gt;
&lt;span class="x"&gt;                    select = -c(contb_receipt_dt))&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Print&lt;/span&gt;&lt;span class="x"&gt; correlation table&lt;/span&gt;
&lt;span class="x"&gt;cor(agg_date_subset_data_spread_date_removed, use = &amp;quot;complete&amp;quot;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                            Bush, Jeb Carson, Benjamin S.&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Bush, Jeb                  1.0000000         -0.20197318&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Carson, Benjamin S.       -0.2019732          1.00000000&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Clinton, Hillary Rodham   -0.5183566         -0.33024620&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Cruz, Rafael Edward &amp;#39;Ted&amp;#39; -0.3429602         -0.21621087&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Rubio, Marco              -0.2978618          0.09202251&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Sanders, Bernard          -0.6198756         -0.28592116&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                           Clinton, Hillary Rodham&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Bush, Jeb                              -0.5183566&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Carson, Benjamin S.                    -0.3302462&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Clinton, Hillary Rodham                 1.0000000&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Cruz, Rafael Edward &amp;#39;Ted&amp;#39;               0.8615447&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Rubio, Marco                            0.1278609&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Sanders, Bernard                        0.9250624&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                           Cruz, Rafael Edward &amp;#39;Ted&amp;#39; Rubio, Marco&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Bush, Jeb                                -0.3429602  -0.29786181&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Carson, Benjamin S.                      -0.2162109   0.09202251&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Clinton, Hillary Rodham                   0.8615447   0.12786086&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Cruz, Rafael Edward &amp;#39;Ted&amp;#39;                 1.0000000   0.10303551&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Rubio, Marco                              0.1030355   1.00000000&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Sanders, Bernard                          0.7630061  -0.15426850&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt;                           Sanders, Bernard&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Bush, Jeb                       -0.6198756&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Carson, Benjamin S.             -0.2859212&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Clinton, Hillary Rodham          0.9250624&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Cruz, Rafael Edward &amp;#39;Ted&amp;#39;        0.7630061&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Rubio, Marco                    -0.1542685&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; Sanders, Bernard                 1.0000000&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Generate&lt;/span&gt;&lt;span class="x"&gt; correlation pairs graph&lt;/span&gt;
&lt;span class="x"&gt;pairs.panels(agg_date_subset_data_spread_date_removed)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-6-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;The largest positive correlation for the contributions is with Clinton
and Sanders. Since they are both Democrats, it may be that Democrat
supporters started donating to their favourite candidates at the same
time. Other significant positive correlations are between Clinton and
Cruz, as well as Cruz and Sanders.&lt;br&gt;
Let's look at the contribution trends for Clinton and Sanders
individually in order to better understand the correlation between the
two.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Subset&lt;/span&gt;&lt;span class="x"&gt; data for desired candidates&lt;/span&gt;
&lt;span class="x"&gt;data_subset = subset(data, cand_nm == c(&amp;quot;Sanders, Bernard&amp;quot;, &lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Clinton, Hillary Rodham&amp;quot;))&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Floor&lt;/span&gt;&lt;span class="x"&gt; the dates to the first of each month&lt;/span&gt;
&lt;span class="x"&gt;data_subset&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt; = floor_date(data_subset&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt;, &lt;/span&gt;
&lt;span class="x"&gt;                                          &amp;quot;month&amp;quot;)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Group&lt;/span&gt;&lt;span class="x"&gt; the data by candidate&lt;/span&gt;
&lt;span class="x"&gt;date_candidate_groups = group_by(data_subset, contb_receipt_dt, cand_nm)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Summarise&lt;/span&gt;&lt;span class="x"&gt; data to get total contribution amount for each candidate&lt;/span&gt;
&lt;span class="x"&gt;date_candidate_data = summarise(date_candidate_groups, &lt;/span&gt;
&lt;span class="x"&gt;                                total_cont = sum(contb_receipt_amt))&lt;/span&gt;
&lt;span class="x"&gt;g1 = ggplot(data = subset(date_candidate_data, &lt;/span&gt;
&lt;span class="x"&gt;                          cand_nm == &amp;quot;Clinton, Hillary Rodham&amp;quot;), &lt;/span&gt;
&lt;span class="x"&gt;                          aes(x = contb_receipt_dt, y = total_cont)) + &lt;/span&gt;
&lt;span class="x"&gt;     geom_line()&lt;/span&gt;
&lt;span class="x"&gt;g2 = ggplot(data = subset(date_candidate_data, &lt;/span&gt;
&lt;span class="x"&gt;                          cand_nm == &amp;quot;Sanders, Bernard&amp;quot;), &lt;/span&gt;
&lt;span class="x"&gt;                          aes(x = contb_receipt_dt, y = total_cont)) + &lt;/span&gt;
&lt;span class="x"&gt;     geom_line()&lt;/span&gt;
&lt;span class="x"&gt;grid.arrange(g1,g2,ncol = 1)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-7-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;The large correlation between Clinton and Sanders is mainly driven by
the trends prior to Jan-2016.Around Jan-2016, the trends shift towards
having a negative correlation. Contributions for Sanders begin to rise
very quickly and begin to decrease for Clinton very quickly as well.&lt;br&gt;
Next lets take a look at a scatterplot for contributions for Clinton and
Sanders.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Spread the candidate name across multiple columns
date_candidate_data_spread = spread(date_candidate_data, cand_nm, 
                                    total_cont)
#Assign names to each column
names(date_candidate_data_spread) = c(&amp;quot;Date&amp;quot;, &amp;quot;Clinton&amp;quot;, &amp;quot;Sanders&amp;quot;)
ggplot(data = date_candidate_data_spread, aes(x = Clinton, y = Sanders)) + 
  geom_point()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-8-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;If the correlation between the 2 candidates was exactly 1, we would see
all the points fall in a straight line going from the bottom-left corner
of the plot to the top-right. In this case however, the points do not
fall on a straight line, but by looking at the plot, one can conclude
the relationship between the contributions made to Clinton and Sanders
has a positive correlation.&lt;br&gt;
The following boxplots were plotted in order to get a better sense of
how the contribution amounts are distributed amongst the 6 candidates.
Also displayed below are the Interquartile Range for each candidate.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired candidates
data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;, 
                                          &amp;quot;Clinton, Hillary Rodham&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;))
ggplot(data = data_subset, aes(x = cand_nm, y = contb_receipt_amt)) + 
  geom_boxplot() +
  coord_cartesian(ylim = c(0,6000)) + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/Bivariate_Plots-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;print(&amp;quot;Bush, Jeb&amp;quot;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] &amp;quot;Bush, Jeb&amp;quot;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;IQR(subset(data_subset, &lt;/span&gt;
&lt;span class="x"&gt;           cand_nm == &amp;quot;Bush, Jeb&amp;quot;)&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_amt&lt;/span&gt;&lt;span class="x"&gt;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] 2600&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;print(&amp;quot;Carson, Benjamin S.&amp;quot;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] &amp;quot;Carson, Benjamin S.&amp;quot;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;IQR(subset(data_subset, &lt;/span&gt;
&lt;span class="x"&gt;           cand_nm == &amp;quot;Carson, Benjamin S.&amp;quot;)&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_amt&lt;/span&gt;&lt;span class="x"&gt;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] 75&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;print(&amp;quot;Clinton, Hillary Rodham&amp;quot;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] &amp;quot;Clinton, Hillary Rodham&amp;quot;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;IQR(subset(data_subset, &lt;/span&gt;
&lt;span class="x"&gt;           cand_nm == &amp;quot;Clinton, Hillary Rodham&amp;quot;)&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_amt&lt;/span&gt;&lt;span class="x"&gt;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] 225&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;print(&amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;IQR(subset(data_subset, &lt;/span&gt;
&lt;span class="x"&gt;           cand_nm == &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;)&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_amt&lt;/span&gt;&lt;span class="x"&gt;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] 75&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;print(&amp;quot;Rubio, Marco&amp;quot;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] &amp;quot;Rubio, Marco&amp;quot;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;IQR(subset(data_subset, &lt;/span&gt;
&lt;span class="x"&gt;           cand_nm == &amp;quot;Rubio, Marco&amp;quot;)&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_amt&lt;/span&gt;&lt;span class="x"&gt;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] 675&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;print(&amp;quot;Sanders, Bernard&amp;quot;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] &amp;quot;Sanders, Bernard&amp;quot;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;

&lt;span class="x"&gt;IQR(subset(data_subset, &lt;/span&gt;
&lt;span class="x"&gt;           cand_nm == &amp;quot;Sanders, Bernard&amp;quot;)&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_amt&lt;/span&gt;&lt;span class="x"&gt;)&lt;/span&gt;

&lt;span class="cp"&gt;##&lt;/span&gt;&lt;span class="c"&gt; [1] 35&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Because of the very large range of contribution amounts, the y-axis of
the above plot was restricted between \$0 and \$6,000. Also displayed is
the interquartile range for each candidate:&lt;br&gt;
Sanders: \$35, Clinton: \$225, Cruz: \$75, Carson: \$75, Rubio: \$975,
Bush: \$2600&lt;br&gt;
Bush by far has the largest interquartile range whereas Sanders, Cruz
and Carson are much smaller in comparison.&lt;br&gt;
Next we explore contibution amounts based on occupations. The dataset
summary above tells us that most number of contribution came from those
not employed, retired, Attorneys, Teachers and Professors. Let's explore
the contribution amounts from those occupations.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired occupations
data_subset = subset(data, contbr_occupation %in% c(&amp;quot;NOT EMPLOYED&amp;quot;, 
                                                    &amp;quot;RETIRED&amp;quot;, &amp;quot;ATTORNY&amp;quot;,
                                                  &amp;quot;TEACHER&amp;quot;, &amp;quot;PROFESSOR&amp;quot;))

ggplot(data = data_subset, aes(x = contbr_occupation, y = contb_receipt_amt)) +
  geom_boxplot() +
  coord_cartesian(ylim = c(-100,1000))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-9-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;From the boxplot above, we can see that Professors had the largest
interquartile range. By visual inspection, it appears that the retired
demographic had the largest median as well as the most refunds.&lt;br&gt;
It would be interesting to see who most of the contributions went to
from each of the above mentioned occupations and candidates.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired candidates
data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;, 
                                          &amp;quot;Clinton, Hillary Rodham&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;) &amp;amp; 
                                        contbr_occupation %in% c(&amp;quot;NOT EMPLOYED&amp;quot;, 
                                                                 &amp;quot;RETIRED&amp;quot;, 
                                                              &amp;quot;ATTORNY&amp;quot;, 
                                                              &amp;quot;TEACHER&amp;quot;, 
                                                              &amp;quot;PROFESSOR&amp;quot;))
#Group data by candidate and occupation
occupation_candidate_groups = group_by(data_subset, 
                                       contbr_occupation, cand_nm)
#Get sum of contribution amount for each combination of candidate 
#and occupation
occupation_candidate_data = summarise(occupation_candidate_groups, 
                                      contsum = sum(contb_receipt_amt))
#Spread occupation into multiple columns
topcontdata = spread(occupation_candidate_data, 
                     contbr_occupation, contsum)
topcontdata

## Source: local data frame [6 x 5]
## 
##                     cand_nm NOT EMPLOYED PROFESSOR   RETIRED   TEACHER
##                      (fctr)        (dbl)     (dbl)     (dbl)     (dbl)
## 1                 Bush, Jeb           NA    3200.0  399274.3   8125.00
## 2       Carson, Benjamin S.           NA     350.0  257266.6   2697.00
## 3   Clinton, Hillary Rodham     338744.4  224731.8 1530139.2 162532.96
## 4 Cruz, Rafael Edward &amp;#39;Ted&amp;#39;           NA    1950.0  326128.5   5940.00
## 5              Rubio, Marco           NA    4650.0  241481.6  16865.15
## 6          Sanders, Bernard    1351284.8  137505.9  182104.6 140516.64
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Out of the 6 top candidates, Clinton and Sanders were the only 2
candidates to get contributions from all of the above mentioned
occupations. Those not employed only contributed to either Clinton or
Sanders.&lt;/p&gt;
&lt;h1&gt;Bivariate Analysis&lt;/h1&gt;
&lt;h3&gt;Talk about some of the relationships you observed in this part of&lt;/h3&gt;
&lt;h3&gt;the investigation. How did the feature(s) of interest vary with&lt;/h3&gt;
&lt;h3&gt;other features in the dataset?&lt;/h3&gt;
&lt;p&gt;The first relationship that I observed in this part of the investigation
involved looking at the contributions made by date. Unsurprisingly, the
total amount of contributions trended positively with time. Other
relationships that I observed in this part of the investigation involved
how the contribution amount varied amongst the candidates and the amount
that different occupations were contributing to the top candidates. It
turned out that variation in the contribution amount was drastically
different for Bush than it was for Sanders. In addition, it was
interesting to see that those not employed only made contributions to
Clinton and Sanders.&lt;/p&gt;
&lt;h3&gt;Did you observe any interesting relationships between the other&lt;/h3&gt;
&lt;h3&gt;features (not the main feature(s) of interest)?&lt;/h3&gt;
&lt;p&gt;It was interesting to see that those not employed only made
contributions to Clinton and Sanders who are both running as Democrats
(out of the top 6). Those not employed made no contributions to any of
the Republic candidates (out of the top 6).&lt;/p&gt;
&lt;h3&gt;What was the strongest relationship you found?&lt;/h3&gt;
&lt;p&gt;The strongest relationship I found was in contributions made to Clinton
and Sanders. This relationship however, begins to break down after
Jan-2016 and the trend begins to move in opposite direction for the
candidates.&lt;/p&gt;
&lt;h1&gt;Multivariate Plots Section&lt;/h1&gt;
&lt;p&gt;Next we explore the sum of the contibution amounts for each of the top 6
candidates all on the same plot.&lt;br&gt;
Note: the plot only displays contibutions between Jan. 2015 and Mar.
2016.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Subset&lt;/span&gt;&lt;span class="x"&gt; data for desired candidates&lt;/span&gt;
&lt;span class="x"&gt;data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;, &lt;/span&gt;
&lt;span class="x"&gt;                                          &amp;quot;Clinton, Hillary Rodham&amp;quot;,&lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, &lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Carson, Benjamin S.&amp;quot;,&lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;))&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Floor&lt;/span&gt;&lt;span class="x"&gt; the dates to the first of each month&lt;/span&gt;
&lt;span class="x"&gt;data_subset&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt; = floor_date(data_subset&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt;, &lt;/span&gt;
&lt;span class="x"&gt;                                          &amp;quot;month&amp;quot;)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Group&lt;/span&gt;&lt;span class="x"&gt; data by contribution date and candidate name&lt;/span&gt;
&lt;span class="x"&gt;date_candidate_groups = group_by(data_subset, contb_receipt_dt, &lt;/span&gt;
&lt;span class="x"&gt;                                 cand_nm)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Get&lt;/span&gt;&lt;span class="x"&gt; sum of contribution amount for each combination of date &lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;and&lt;/span&gt;&lt;span class="x"&gt; candidate&lt;/span&gt;
&lt;span class="x"&gt;date_candidate_data = summarise(date_candidate_groups, &lt;/span&gt;
&lt;span class="x"&gt;                                total_cont = sum(contb_receipt_amt))&lt;/span&gt;
&lt;span class="x"&gt;ggplot(data = date_candidate_data, aes(x = contb_receipt_dt, &lt;/span&gt;
&lt;span class="x"&gt;                                       y = total_cont, &lt;/span&gt;
&lt;span class="x"&gt;                                       color = cand_nm)) + &lt;/span&gt;
&lt;span class="x"&gt;  geom_line() + &lt;/span&gt;
&lt;span class="x"&gt;  coord_cartesian(ylim = c(0,1000000)) + &lt;/span&gt;
&lt;span class="x"&gt;  coord_cartesian(xlim = c(ymd(&amp;quot;2015-01-01&amp;quot;), &lt;/span&gt;
&lt;span class="x"&gt;                           ymd(&amp;quot;2016-03-01&amp;quot;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-11-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;It's quite clear that contributions made to Clinton are much larger than
the rest of the candidates. Before we explore this particular&lt;br&gt;
candidate in more detail, let's first look at the other 5 candidates in
a separate plot.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Subset&lt;/span&gt;&lt;span class="x"&gt; data for desired candidates&lt;/span&gt;
&lt;span class="x"&gt;data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;,&lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, &lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Carson, Benjamin S.&amp;quot;,&lt;/span&gt;
&lt;span class="x"&gt;                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;))&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Floor&lt;/span&gt;&lt;span class="x"&gt; the dates to the first of each month&lt;/span&gt;
&lt;span class="x"&gt;data_subset&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt; = floor_date(data_subset&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt;, &lt;/span&gt;
&lt;span class="x"&gt;                                          &amp;quot;month&amp;quot;)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Group&lt;/span&gt;&lt;span class="x"&gt; data by contribution date and candidate name&lt;/span&gt;
&lt;span class="x"&gt;date_candidate_groups = group_by(data_subset, contb_receipt_dt, &lt;/span&gt;
&lt;span class="x"&gt;                                 cand_nm)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Get&lt;/span&gt;&lt;span class="x"&gt; sum of contribution amount for each combination of date &lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;and&lt;/span&gt;&lt;span class="x"&gt; candidate&lt;/span&gt;
&lt;span class="x"&gt;date_candidate_data = summarise(date_candidate_groups, &lt;/span&gt;
&lt;span class="x"&gt;                                total_cont = sum(contb_receipt_amt))&lt;/span&gt;
&lt;span class="x"&gt;ggplot(data = date_candidate_data, aes(x = contb_receipt_dt, &lt;/span&gt;
&lt;span class="x"&gt;                                       y = total_cont, &lt;/span&gt;
&lt;span class="x"&gt;                                       color = cand_nm)) + &lt;/span&gt;
&lt;span class="x"&gt;  geom_line() + &lt;/span&gt;
&lt;span class="x"&gt;  coord_cartesian(ylim = c(0,5000000)) + &lt;/span&gt;
&lt;span class="x"&gt;  coord_cartesian(xlim = c(ymd(&amp;quot;2015-01-01&amp;quot;), &lt;/span&gt;
&lt;span class="x"&gt;                           ymd(&amp;quot;2016-03-01&amp;quot;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-12-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;This plot now gives us a better view into the trend in contribution
amounts for the other candidates. The first 2 things that jump out
are:&lt;br&gt;
1. Contribution amounts increasing at a very fast pace for Sanders&lt;br&gt;
2. Contribution amounts decreasing at a very fast face for Bush&lt;br&gt;
Contribution amounts for the other candidates seem to be relatively
stable except for a couple of really good months Rubio had towards the
end of 2015.&lt;br&gt;
Since Clinton is an exceptional case, it may be worthwhile to dig a
little deeper into where her contributions are coming from.&lt;br&gt;
Let`s first look at the summary of the data which contains only
contributions made to Clinton.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;data_subset = subset(data, cand_nm %in% c(&amp;quot;Clinton, Hillary Rodham&amp;quot;))
summary(data_subset)

##       cmte_id           cand_id                           cand_nm     
##  C00575795:59789   P00003392:59789   Clinton, Hillary Rodham  :59789  
##  C00458844:    0   P20002671:    0   Bush, Jeb                :    0  
##  C00500587:    0   P20002721:    0   Carson, Benjamin S.      :    0  
##  C00573519:    0   P20003281:    0   Christie, Christopher J. :    0  
##  C00574624:    0   P20003984:    0   Cruz, Rafael Edward &amp;#39;Ted&amp;#39;:    0  
##  C00575449:    0   P40003576:    0   Fiorina, Carly           :    0  
##  (Other)  :    0   (Other)  :    0   (Other)                  :    0  
##             contbr_nm            contbr_city    contbr_st 
##  FISHER, MICHAEL :  115   NEW YORK     :26518   NY:59789  
##  DOWD, KATIE     :  113   BROOKLYN     : 7339             
##  TIDD, FRANCIS   :   93   BRONX        : 1254             
##  NAZIR, MOHAMMAD :   90   ROCHESTER    :  710             
##  RICHERT, RUTHANN:   85   BUFFALO      :  594             
##  GRODY, GORDON   :   83   STATEN ISLAND:  504             
##  (Other)         :59210   (Other)      :22870             
##      contbr_zip                 contbr_employer 
##  10024    :  191   N/A                  :10168  
##  112012776:  157   SELF-EMPLOYED        : 8708  
##  10025    :  143   RETIRED              : 2854  
##  10011    :  129   INFORMATION REQUESTED: 1844  
##  10128    :  125   HILLARY FOR AMERICA  :  940  
##  100117200:  113   (Other)              :35272  
##  (Other)  :58931   NA&amp;#39;s                 :    3  
##              contbr_occupation contb_receipt_amt
##  RETIRED              : 7265   Min.   :  -5400  
##  ATTORNEY             : 3635   1st Qu.:     25  
##  INFORMATION REQUESTED: 1935   Median :     50  
##  LAWYER               : 1480   Mean   :    610  
##  NOT EMPLOYED         : 1307   3rd Qu.:    250  
##  (Other)              :44164   Max.   :4904861  
##  NA&amp;#39;s                 :    3                    
##  contb_receipt_dt             
##  Min.   :2015-04-12 00:00:00  
##  1st Qu.:2015-10-22 00:00:00  
##  Median :2016-02-02 00:00:00  
##  Mean   :2015-12-21 12:01:59  
##  3rd Qu.:2016-03-03 00:00:00  
##  Max.   :2016-03-31 00:00:00  
##                               
##                                                            receipt_desc  
##                                                                  :59176  
##  Refund                                                          :  613  
##   SEE REATTRIBUTION                                              :    0  
##  * EARMARKED CONTRIBUTION: SEE BELOW REATTRIBUTION/REFUND PENDING:    0  
##  REATTRIBUTION / REDESIGNATION REQUESTED                         :    0  
##  REATTRIBUTION / REDESIGNATION REQUESTED (AUTOMATIC)             :    0  
##  (Other)                                                         :    0  
##  memo_cd                                     memo_text      form_tp     
##   :52289                                          :51936   SA17A:51802  
##  X: 7500   * HILLARY VICTORY FUND                 : 7368   SA18 : 7374  
##            * EARMARKED CONTRIBUTION: SEE BELOW    :  255   SB28A:  613  
##            *BEST EFFORTS UPDATE                   :   69                
##            *                                      :   61                
##            PARTNERSHIP--PARTNERS BELOW IF ITEMIZED:   27                
##            (Other)                                :   73                
##     file_num           tran_id      election_tp. 
##  Min.   :1024052   C1013282:    2        :    0  
##  1st Qu.:1056807   C1014914:    2   G2016:  992  
##  Median :1057425   C1022783:    2   P2016:58797  
##  Mean   :1054254   C1023143:    2   P2020:    0  
##  3rd Qu.:1066337   C1024890:    2                
##  Max.   :1066337   C1025546:    2                
##                    (Other) :59777
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Most of the number of contributions came from Zip Code 10024, which is
(unsurprisingly) a wealthy neighbourhood in Manhattan.&lt;br&gt;
Below is a graph of the total contribution amounts made to Clinton by
city and split by occupation.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;data_subset = subset(data, cand_nm %in% c(&amp;quot;Clinton, Hillary Rodham&amp;quot;) &amp;amp;
                       contbr_city %in% c(&amp;quot;NEW YORK&amp;quot;, &amp;quot;BROOKLYN&amp;quot;, 
                                          &amp;quot;BRONX&amp;quot;, &amp;quot;ROCHESTER&amp;quot;, 
                                          &amp;quot;BUFFALO&amp;quot;, &amp;quot;STATEN ISLAND&amp;quot;) &amp;amp;
                       contbr_occupation %in% c(&amp;quot;RETIRED&amp;quot;, &amp;quot;ATTORNEY&amp;quot;, 
                                                &amp;quot;LAWYER&amp;quot;, &amp;quot;NOT EMPLOYED&amp;quot;)) 
ggplot(data = data_subset, aes(x = contbr_city, 
                               y = contb_receipt_amt, 
                               color = contbr_occupation)) + 
  geom_point()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-14-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Generally, Lawyers and Attorneys tend to contribute larger amounts when
compared to those not employed and retired. New York City has the
largest dispersion with residents from Rochester and Staten Island
contribution relatively smaller amounts with a few outliers.&lt;br&gt;
Below are 2 stacked column graphs that aggregate the data in the above
plot and present it in different views.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired candidates
data_subset = subset(data, cand_nm %in% c(&amp;quot;Clinton, Hillary Rodham&amp;quot;) &amp;amp;
                       contbr_city %in% c(&amp;quot;NEW YORK&amp;quot;, &amp;quot;BROOKLYN&amp;quot;, 
                                          &amp;quot;BRONX&amp;quot;, &amp;quot;ROCHESTER&amp;quot;, 
                                          &amp;quot;BUFFALO&amp;quot;, &amp;quot;STATEN ISLAND&amp;quot;) &amp;amp;
                       contbr_occupation %in% 
                       c(&amp;quot;RETIRED&amp;quot;, &amp;quot;ATTORNEY&amp;quot;, &amp;quot;LAWYER&amp;quot;, 
                         &amp;quot;NOT EMPLOYED&amp;quot;))
#Aggregate contribution amount for occupation and city
agg_data = aggregate(contb_receipt_amt ~ contbr_occupation + 
                       contbr_city, data = data_subset, FUN = sum)
ggplot(data = agg_data, aes(x = contbr_city, y = contb_receipt_amt, 
                            fill = contbr_occupation)) + 
  geom_bar(stat = &amp;quot;identity&amp;quot;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-15-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ggplot(data = agg_data, aes(x = contbr_occupation, 
                            y = contb_receipt_amt, 
                            fill = contbr_city)) + 
  geom_bar(stat = &amp;quot;identity&amp;quot;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-15-2.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;From the first plot, it is quite apparent that most of the contribution
to Clinton's campaign came from New York City. Within New York City, the
largest proportion of those contributions were made by Attorneys,
followed by Lawyers and those retired.&lt;br&gt;
The second plot has the occupations on the x-axis with the colors now
representing the city. From the fist plot, it was difficult to tell
whether more contributions were coming from Lawyers or those retired.
The second plot makes the answer to this question quite clear, showing
contributions coming from those retired exceeded the contributions from
Lawyers. The largest contributors however remain to be Attorneys.&lt;br&gt;
By looking at both of the above plots, it can be concluded that largest
category of contributors were Attorneys from New York City.&lt;br&gt;
Now let's go back to exploring the other candidates.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;, 
                                          &amp;quot;Clinton, Hillary Rodham&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;))
summary(data_subset)

##       cmte_id           cand_id                           cand_nm     
##  C00577130:95454   P60007168:95454   Sanders, Bernard         :95454  
##  C00575795:59789   P00003392:59789   Clinton, Hillary Rodham  :59789  
##  C00574624:11764   P60006111:11764   Cruz, Rafael Edward &amp;#39;Ted&amp;#39;:11764  
##  C00573519: 6614   P60005915: 6614   Carson, Benjamin S.      : 6614  
##  C00458844: 4678   P60006723: 4678   Rubio, Marco             : 4678  
##  C00579458: 2419   P60008059: 2419   Bush, Jeb                : 2419  
##  (Other)  :    0   (Other)  :    0   (Other)                  :    0  
##                     contbr_nm         contbr_city    contbr_st  
##  SWIRE, JAMES BENNETT MR.:   143   NEW YORK :53679   NY:180718  
##  PERE, RENE              :   120   BROOKLYN :22616              
##  SWIRE, JAMES B. MR.     :   119   BRONX    : 3655              
##  FISHER, MICHAEL         :   115   ROCHESTER: 3004              
##  DOWD, KATIE             :   113   BUFFALO  : 2302              
##  DYCKMAN, MICHAEL MR.    :   107   ITHACA   : 2157              
##  (Other)                 :180001   (Other)  :93305              
##      contbr_zip          contbr_employer      contbr_occupation 
##  108052128:   299   NONE         : 14123   NOT EMPLOYED: 24042  
##  10024    :   220   NOT EMPLOYED : 13241   RETIRED     : 19881  
##  10025    :   185   RETIRED      : 13201   ATTORNEY    :  6537  
##  10128    :   174   SELF-EMPLOYED: 10800   TEACHER     :  3988  
##  11377    :   167   N/A          : 10475   PROFESSOR   :  3262  
##  10023    :   163   (Other)      :118761   (Other)     :122988  
##  (Other)  :179510   NA&amp;#39;s         :   117   NA&amp;#39;s        :    20  
##  contb_receipt_amt contb_receipt_dt             
##  Min.   :  -5400   Min.   :2013-10-11 00:00:00  
##  1st Qu.:     15   1st Qu.:2015-12-08 00:00:00  
##  Median :     35   Median :2016-02-11 00:00:00  
##  Mean   :    279   Mean   :2016-01-10 20:23:45  
##  3rd Qu.:    100   3rd Qu.:2016-03-09 00:00:00  
##  Max.   :4904861   Max.   :2016-03-31 00:00:00  
##                                                 
##                      receipt_desc    memo_cd   
##                            :178403    :172403  
##  Refund                    :  1200   X:  8315  
##  REDESIGNATION TO GENERAL  :   218             
##  REDESIGNATION FROM PRIMARY:   217             
##  REATTRIBUTION FROM SPOUSE :   133             
##  REATTRIBUTION TO SPOUSE   :   133             
##  (Other)                   :   414             
##                                memo_text      form_tp      
##  * EARMARKED CONTRIBUTION: SEE BELOW:90544   SA17A:172126  
##                                     :81022   SA18 :  7392  
##  * HILLARY VICTORY FUND             : 7368   SB28A:  1200  
##  EARMARKED FROM MAKE DC LISTEN      :  251                 
##  REDESIGNATION TO GENERAL           :  218                 
##  REDESIGNATION FROM PRIMARY         :  217                 
##  (Other)                            : 1098                 
##     file_num           tran_id       election_tp.  
##  Min.   :1003942   C1013282:     2        :    19  
##  1st Qu.:1056807   C1014914:     2   G2016:  1293  
##  Median :1057425   C1022783:     2   P2016:179406  
##  Mean   :1056396   C1023143:     2   P2020:     0  
##  3rd Qu.:1066337   C1024890:     2                 
##  Max.   :1066425   C1025546:     2                 
##                    (Other) :180706
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Based on the summary above, we will look at total contributions made to
the top 6 candidates for the following cities and occupations:&lt;br&gt;
Cities: New York, Brooklyn, Bronx, Rochester, Buffalo and Ithaca&lt;br&gt;
Occupations Not Employed, Retired, Attorney, Teacher and Professor.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;, 
                                          &amp;quot;Clinton, Hillary Rodham&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;) &amp;amp;
                       contbr_city %in% c(&amp;quot;NEW YORK&amp;quot;, &amp;quot;BROOKLYN&amp;quot;, 
                                          &amp;quot;BRONX&amp;quot;, &amp;quot;ROCHESTER&amp;quot;, 
                                          &amp;quot;BUFFALO&amp;quot;, &amp;quot;ITHACA&amp;quot;) &amp;amp;
                       contbr_occupation %in% c(&amp;quot;RETIRED&amp;quot;, &amp;quot;ATTORNEY&amp;quot;, 
                                                &amp;quot;NOT EMPLOYED&amp;quot;, 
                                                &amp;quot;TEACHER&amp;quot;, &amp;quot;PROFESSOR&amp;quot;)) 
ggplot(data = data_subset, aes(x = cand_nm, y = contb_receipt_amt, 
                               color = contbr_occupation)) + 
  geom_point() +
  coord_cartesian(ylim = c(0, 6000)) + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-17-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Note that the y-limits have been adjusted to ignore the refunded
contributions. For each candidate, except for Clinton, there appears to
be at least one outlier whose contributions are much larger than the
rest of the contribution amounts. Other than those few outliers, only
Clinton and Sanders seem receive fairly uniform contributions between
\$0 and \$3200.&lt;br&gt;
Let's now turn our focus to aggregated contribution sums instead of
individual amounts as we saw above.&lt;br&gt;
We first look at the contribution amounts to each candidate broken out
by city.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired candidates
data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;, 
                                          &amp;quot;Clinton, Hillary Rodham&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;) &amp;amp;
                       contbr_city %in% c(&amp;quot;NEW YORK&amp;quot;, &amp;quot;BROOKLYN&amp;quot;, 
                                          &amp;quot;BRONX&amp;quot;, &amp;quot;ROCHESTER&amp;quot;, &amp;quot;BUFFALO&amp;quot;,
                                          &amp;quot;ITHACA&amp;quot;) &amp;amp;
                       contbr_occupation %in% c(&amp;quot;RETIRED&amp;quot;, 
                                                &amp;quot;ATTORNEY&amp;quot;, 
                                                &amp;quot;NOT EMPLOYED&amp;quot;, &amp;quot;TEACHER&amp;quot;, 
                                                &amp;quot;PROFESSOR&amp;quot;)) 
#Aggregate contribution amount for candidate, occcupation and city
agg_data = aggregate(contb_receipt_amt ~ cand_nm + contbr_occupation + 
                       contbr_city, data = data_subset, FUN = sum)
ggplot(data = agg_data, aes(x = cand_nm, y = contb_receipt_amt, 
                            fill = contbr_city)) + 
  geom_bar(stat = &amp;quot;identity&amp;quot;) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-18-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Once again, we see that having Clinton in the same plot makes it
difficult to analyze what is happening with the other candidates.&lt;br&gt;
Since we have already explored Clinton's contribution data, it would
fine to remove her from the analysis going forward.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired candidates
data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;) &amp;amp;
                       contbr_city %in% c(&amp;quot;NEW YORK&amp;quot;, &amp;quot;BROOKLYN&amp;quot;, 
                                          &amp;quot;BRONX&amp;quot;, &amp;quot;ROCHESTER&amp;quot;, &amp;quot;BUFFALO&amp;quot;, 
                                          &amp;quot;ITHACA&amp;quot;) &amp;amp;
                       contbr_occupation %in% c(&amp;quot;RETIRED&amp;quot;, &amp;quot;ATTORNEY&amp;quot;, 
                                                &amp;quot;NOT EMPLOYED&amp;quot;, &amp;quot;TEACHER&amp;quot;, 
                                                &amp;quot;PROFESSOR&amp;quot;)) 
#Aggregate contribution amount for candidate, occcupation and city
agg_data = aggregate(contb_receipt_amt ~ cand_nm + contbr_occupation + 
                       contbr_city, data = data_subset, FUN = sum)
ggplot(data = agg_data, aes(x = cand_nm, y = contb_receipt_amt, 
                            fill = contbr_city)) + 
  geom_bar(stat = &amp;quot;identity&amp;quot;) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-19-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Much better! We now see that out of the 5 candidates presented, Sanders
has the largest total contribution amount, followed by Bush, Rubio, Cruz
and Carson in that order. For each of the candidates, we see that
majority of those contributions came from New York City, followed by
Brooklyn. Those 2 cities are really the only two that stand out and the
amounts become too small to determine the order thereafter.&lt;br&gt;
Now let's look at the same type of plot but with the contribution
amounts broken up by occupation as opposed to city.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired candidates
data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;) &amp;amp;
                       contbr_city %in% c(&amp;quot;NEW YORK&amp;quot;, &amp;quot;BROOKLYN&amp;quot;, 
                                          &amp;quot;BRONX&amp;quot;, &amp;quot;ROCHESTER&amp;quot;, &amp;quot;BUFFALO&amp;quot;, 
                                          &amp;quot;ITHACA&amp;quot;) &amp;amp;
                       contbr_occupation %in% c(&amp;quot;RETIRED&amp;quot;, &amp;quot;ATTORNEY&amp;quot;, 
                                                &amp;quot;NOT EMPLOYED&amp;quot;, &amp;quot;TEACHER&amp;quot;, 
                                                &amp;quot;PROFESSOR&amp;quot;)) 
#Aggregate contribution amount for candidate, occcupation and city
agg_data = aggregate(contb_receipt_amt ~ cand_nm + contbr_city + 
                       contbr_occupation, data = data_subset, FUN = sum)
ggplot(data = agg_data, aes(x = cand_nm, y = contb_receipt_amt, 
                            fill = contbr_occupation)) + 
  geom_bar(stat = &amp;quot;identity&amp;quot;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-20-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;The total amount of contributions in this plot remains the same as the
prior plot. The difference is now the size of each colored chunk (which
now represents occupation instead of city) in the total stack for each
candidate. The story here is much less uniform than it was in the
previous case. Most of the contributions made to Sanders were by those
not employed whereas most of the contributions made to the other
candidates were by either those retired or Attorneys.&lt;br&gt;
For the next part of the analysis, let's move our attention away from
the individual candidates and focus on the city and occupation only.&lt;br&gt;
Keep in that although not explicity shown, the data is still being
filtered for the candidates, cities and occupations in the plots above.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired candidates
data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;) &amp;amp;
                       contbr_city %in% c(&amp;quot;NEW YORK&amp;quot;, &amp;quot;BROOKLYN&amp;quot;, 
                                          &amp;quot;BRONX&amp;quot;, &amp;quot;ROCHESTER&amp;quot;, &amp;quot;BUFFALO&amp;quot;, 
                                          &amp;quot;ITHACA&amp;quot;) &amp;amp;
                       contbr_occupation %in% c(&amp;quot;RETIRED&amp;quot;, &amp;quot;ATTORNEY&amp;quot;, 
                                                &amp;quot;NOT EMPLOYED&amp;quot;, &amp;quot;TEACHER&amp;quot;, 
                                                &amp;quot;PROFESSOR&amp;quot;)) 
#Aggregate contribution amount for candidate, occcupation and city
agg_data = aggregate(contb_receipt_amt ~ cand_nm + 
                       contbr_occupation + contbr_city, 
                     data = data_subset, FUN = sum)
ggplot(data = agg_data, aes(x = contbr_city, y = contb_receipt_amt, 
                            fill = contbr_occupation )) + 
  geom_bar(stat = &amp;quot;identity&amp;quot;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-21-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Once again we see that New York City outperforms all other cities by a
very large margin, with Attorneys alone contributing more than all other
cities. The likely cause of this is of course the fact that New York
City has a larger population than any of the other cities and further
work can include doing the same analysis on a per capita basis. Other
than the fact that Attorneys contribute large amounts, it is also
interesting to note the large presence of those not employed in each of
the cities.&lt;br&gt;
Let's look at the same data again but with the occupation on the x-axis
and split out by city.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired candidates
data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;) &amp;amp;
                       contbr_city %in% c(&amp;quot;NEW YORK&amp;quot;, &amp;quot;BROOKLYN&amp;quot;, 
                                          &amp;quot;BRONX&amp;quot;, &amp;quot;ROCHESTER&amp;quot;, &amp;quot;BUFFALO&amp;quot;, 
                                          &amp;quot;ITHACA&amp;quot;) &amp;amp;
                       contbr_occupation %in% c(&amp;quot;RETIRED&amp;quot;, &amp;quot;ATTORNEY&amp;quot;, 
                                                &amp;quot;NOT EMPLOYED&amp;quot;, &amp;quot;TEACHER&amp;quot;, 
                                                &amp;quot;PROFESSOR&amp;quot;)) 
#Aggregate contribution amount for candidate, occcupation and city
agg_data = aggregate(contb_receipt_amt ~ cand_nm + contbr_city + 
                       contbr_occupation, data = data_subset, FUN = sum)
ggplot(data = agg_data, aes(x = contbr_occupation, y = contb_receipt_amt, 
                            fill = contbr_city )) + 
  geom_bar(stat = &amp;quot;identity&amp;quot;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/unnamed-chunk-22-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;With New York City dominating in each of the colored stacked bars, it is
still interesting to note that most of the contributions were made by
those not employed, followed by those retired, Attorneys, Professors and
Teachers in that order. From the previous chart it may have seemed like
Attorneys were the top contributing occupation, but this plot proves
otherwise.&lt;/p&gt;
&lt;h1&gt;Multivariate Analysis&lt;/h1&gt;
&lt;h3&gt;Talk about some of the relationships you observed in this part of&lt;/h3&gt;
&lt;h3&gt;the investigation.&lt;/h3&gt;
&lt;p&gt;The relationships that I observed in this part of the investigation
involved looking at the contributions made to each candidate as a
function of time and the aggregate contribution amounts broken up by the
city of the contributors and their occupations.&lt;br&gt;
I also looked at the relationship between the contributors' cities and
occupations without consideration of which candidate they contributed
towards.&lt;/p&gt;
&lt;h3&gt;Were there any interesting or surprising interactions between features?&lt;/h3&gt;
&lt;p&gt;It was interesting to see the negative relationship in contributions
between Bush and Sanders as a function of time. As time progressed,
contributions made to Sanders went up very quickly and the opposite
effect happened for Bush.&lt;br&gt;
It was also interesting to see that the top contributors were Attorneys
from New York City, but the overall top contributors were those retired.
I did not expected those retired to be ranking as the top contributing
group.&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;Final Plots and Summary&lt;/h1&gt;
&lt;h3&gt;Plot One&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Extract&lt;/span&gt;&lt;span class="x"&gt; contribution date and amount from data&lt;/span&gt;
&lt;span class="x"&gt;date_cont_data = data[,c(&amp;quot;contb_receipt_dt&amp;quot;, &amp;quot;contb_receipt_amt&amp;quot;)]&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Floor&lt;/span&gt;&lt;span class="x"&gt; the dates to the first of each month&lt;/span&gt;
&lt;span class="x"&gt;floored_data = date_cont_data&lt;/span&gt;
&lt;span class="x"&gt;floored_data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt; = floor_date(floored_data&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;contb_receipt_dt&lt;/span&gt;&lt;span class="x"&gt;, &lt;/span&gt;
&lt;span class="x"&gt;                                           &amp;quot;month&amp;quot;)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Aggregate&lt;/span&gt;&lt;span class="x"&gt; contribution amount by date&lt;/span&gt;
&lt;span class="x"&gt;agg_date_data = aggregate(contb_receipt_amt ~ contb_receipt_dt, &lt;/span&gt;
&lt;span class="x"&gt;                          data = floored_data, FUN = sum)&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;Plot&lt;/span&gt;&lt;span class="x"&gt; line graph&lt;/span&gt;
&lt;span class="x"&gt;ggplot(data = agg_date_data, aes(x = contb_receipt_dt, &lt;/span&gt;
&lt;span class="x"&gt;                                 y = contb_receipt_amt/1e6)) + &lt;/span&gt;
&lt;span class="x"&gt;  geom_line() +&lt;/span&gt;
&lt;span class="x"&gt;  coord_cartesian(xlim = c(ymd(&amp;quot;2015-01-01&amp;quot;), &lt;/span&gt;
&lt;span class="x"&gt;                           ymd(&amp;quot;2016-03-01&amp;quot;))) + &lt;/span&gt;
&lt;span class="x"&gt;  ggtitle(&amp;#39;Total Contributions&amp;#39;) +&lt;/span&gt;
&lt;span class="x"&gt;  xlab(&amp;#39;Date&amp;#39;) +&lt;/span&gt;
&lt;span class="x"&gt;  ylab(&amp;#39;Contribution Amount (Million &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;)&amp;#39;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/Plot_One-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;h3&gt;Description One&lt;/h3&gt;
&lt;p&gt;The total contribution amounts increase as a function of time, with each
month generally outperforming the previous month's contributions, albiet
with considerable volatility. The contributions really started pouring
in after the 2015 new year and have continued their gradual increase
since then.&lt;/p&gt;
&lt;h3&gt;Plot Two&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Set theme for plot
theme_set(theme_minimal(12))
#Plot boxplot
qplot(x = cand_nm, y = contb_receipt_amt, data = subset(data_subset, contb_receipt_amt&amp;gt;0), 
      geom = &amp;#39;boxplot&amp;#39;,
      fill = cand_nm) +
  ggtitle(&amp;#39;Contribution Amounts by Candidate&amp;#39;) +
  xlab(&amp;#39;Candidate&amp;#39;) +
  ylab(&amp;#39;Log10 of Contribution Amount ($)&amp;#39;) +
  scale_y_log10() +
  theme(legend.position = &amp;#39;none&amp;#39;) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/Plot_Two-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;h3&gt;Description Two&lt;/h3&gt;
&lt;p&gt;We note that the range in contribution amounts varies quite a bit from
one candidate to another. Bush seemed to have the largest median
contribution amount with very few outliers. Sanders on the other had a
very small IQR with many outliers on the higher end.&lt;/p&gt;
&lt;h3&gt;Plot Three&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#Subset data for desired candidates
data_subset = subset(data, cand_nm %in% c(&amp;quot;Sanders, Bernard&amp;quot;, 
                                          &amp;quot;Clinton, Hillary Rodham&amp;quot;,
                                        &amp;quot;Cruz, Rafael Edward &amp;#39;Ted&amp;#39;&amp;quot;, 
                                        &amp;quot;Carson, Benjamin S.&amp;quot;,
                                        &amp;quot;Rubio, Marco&amp;quot;, &amp;quot;Bush, Jeb&amp;quot;) &amp;amp;
                       contbr_city %in% c(&amp;quot;NEW YORK&amp;quot;, &amp;quot;BROOKLYN&amp;quot;, 
                                          &amp;quot;BRONX&amp;quot;, &amp;quot;ROCHESTER&amp;quot;, &amp;quot;BUFFALO&amp;quot;, 
                                          &amp;quot;ITHACA&amp;quot;) &amp;amp;
                       contbr_occupation %in% c(&amp;quot;RETIRED&amp;quot;, &amp;quot;ATTORNEY&amp;quot;, 
                                                &amp;quot;NOT EMPLOYED&amp;quot;, &amp;quot;TEACHER&amp;quot;, 
                                                &amp;quot;PROFESSOR&amp;quot;)) 
#Aggregate contribution amount by candidate and occupation
agg_data = aggregate(contb_receipt_amt ~ cand_nm + contbr_occupation, 
                     data = data_subset, FUN = sum)
#plot bar chart
ggplot(data = agg_data, aes(x = cand_nm, y = contb_receipt_amt/1e6, 
                            fill = contbr_occupation )) + 
  geom_bar(stat = &amp;quot;identity&amp;quot;) +
  ggtitle(&amp;#39;Total Contributions by Candidate&amp;#39;) +
  xlab(&amp;#39;Candidate&amp;#39;) +
  ylab(&amp;#39;Contribution Amount (Million $)&amp;#39;) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="/images/Plot_Three-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;h3&gt;Description Three&lt;/h3&gt;
&lt;p&gt;The largest group to contribute were Attorneys to Clinton. Clinton did
get the most contributions out of all the other candidates. Another
sizable group are those not employed contributing to Sanders.  &lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;Reflection&lt;/h1&gt;
&lt;p&gt;With many different features presented in the dataset, I had to only
chose the ones that I believed would be the most interesting and would
present us with the most insight into the financial contributions made
the to 2016 Presidental Campaign. The central feature throughout most of
this exploratory data analysis was the contribution amount. I was very
curious to see which candidates got most of the contributions. After
that, the rest of the analysis focused entirely on the top 6 candidates
since the contributions made to the rest of the candidates were much
less. I also wanted to know which occupation the contributors belonged
to. Since there are many occupations in the dataset, I decided to focus
only on the ones that showed up the most in the dataset. This helped to
not clutter up the plots while still giving a strong indication of
overall trends. Looking at the contribution amounts by date was also
crucial since it gave insight into whether or not the campaigns were
proving to be successful or not. The fact that the contributions for
Sanders were consistently increasing with time and decreasing with time
for Bush proved that Sanders was doing a much better job at campaigning
than Bush. Narrowing in on the most top candidates, occupations and
cities really helped reveal many insights. For future work, I would
definitely consider looking beyond just the top 6 candidates, in
addition to looking beyond the cities and occupations. I would also look
at employers of the contributors to see if we can spot any trends in
that feature.&lt;/p&gt;</content></entry><entry><title>Data Wrangling with MongoDB – OpenStreetMap Data Case Study</title><link href="/data-wrangling-with-mongodb-openstreetmap-data-case-study.html" rel="alternate"></link><published>2016-05-04T00:00:00+00:00</published><updated>2016-05-04T00:00:00+00:00</updated><author><name></name></author><id>tag:None,2016-05-04:/data-wrangling-with-mongodb-openstreetmap-data-case-study.html</id><summary type="html">&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Map Area: &lt;a href="https://mapzen.com/data/metro-extracts/"&gt;Waterloo, Ontario, Canada&lt;/a&gt;&lt;br&gt;
Problems Encountered in the Map:&lt;br&gt;
After initially downloading the Waterloo area and running it against the script below, I noticed the following problems with the data:&lt;br&gt;
•   Inconsistent methods of describing street direction (e.g. “N” or “North”)&lt;br&gt;
•   Inconsistent street types (e.g. St. instead …&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Map Area: &lt;a href="https://mapzen.com/data/metro-extracts/"&gt;Waterloo, Ontario, Canada&lt;/a&gt;&lt;br&gt;
Problems Encountered in the Map:&lt;br&gt;
After initially downloading the Waterloo area and running it against the script below, I noticed the following problems with the data:&lt;br&gt;
•   Inconsistent methods of describing street direction (e.g. “N” or “North”)&lt;br&gt;
•   Inconsistent street types (e.g. St. instead of Street, Dr instead of Drive)&lt;br&gt;
•   Incorrect street types (e.g. AVenue instead of Avenue, Cresent instead of Crescent)&lt;br&gt;
•   Inconsistent method of displaying the Postal Code (XXXXXX instead of XXX XXX)&lt;br&gt;
•   Inconsistent Methods of Describing Street Direction&lt;br&gt;
Some of the street names end with a direction (North, East, South, West). Some of these directions however are entered in as abbreviations (N, E, S, W) as opposed to the full words. In order to keep the direction method consistent, the abbreviation was replaced with the full word.
&lt;em&gt;Inconsistent Street Types&lt;/em&gt;&lt;br&gt;
Some of the street types were abbreviated as St. or Dr instead of Street or Drive, respectively. In order to ensure consistency, all the abbreviations were converted to full street types.&lt;br&gt;
&lt;em&gt;Incorrect Street Types&lt;/em&gt;&lt;br&gt;
Some of the street types were spelt incorrectly such as AVenue and Cresent instead of Avenue and Crescent, respectively. These incorrect words were detected and replaced with the correct spelling.  &lt;/p&gt;
&lt;p&gt;Inconsistent Method if Displaying Postal Code&lt;br&gt;
In Canada, postal codes are 6 characters long with alternating letters and numbers, with an optional space between the first and last 3 characters (i.e. LNL NLN where L = Letter and N = Number). Some of the postal codes in the dataset have a space between the first and last 3 characters and some do not (e.g. N2K4N2 or N2K 4N2). &lt;/p&gt;
&lt;h3&gt;Data Overview&lt;/h3&gt;
&lt;p&gt;Below are some of the basic statistics about the dataset, including the MongoDB queries used to produce the statistics.  &lt;/p&gt;
&lt;h5&gt;File Size&lt;/h5&gt;
&lt;p&gt;waterloo-region_canada.osm – 155MB&lt;br&gt;
waterloo-region_canada.json – 211MB  &lt;/p&gt;
&lt;h5&gt;Number of Documents&lt;/h5&gt;
&lt;p&gt;db.waterloo.find().count()&lt;br&gt;
→ 763051&lt;/p&gt;
&lt;h5&gt;Number of Nodes&lt;/h5&gt;
&lt;p&gt;db.waterloo.find({"type" : "node"}).count()&lt;br&gt;
→ 670362&lt;/p&gt;
&lt;h5&gt;Number of Ways&lt;/h5&gt;
&lt;p&gt;db.waterloo.find({"type" : "way"}).count()&lt;br&gt;
→ 92689&lt;/p&gt;
&lt;h5&gt;Number of Unique Users&lt;/h5&gt;
&lt;p&gt;db.waterloo.aggregate([{ "$group": { "_id": "$created.user"}},
    {"$group": {"_id": 1, "count": { "$sum": 1}}}])&lt;br&gt;
→ 503&lt;/p&gt;
&lt;p&gt;As can be seen, some of the city names are duplicated with different names, such as Waterloo and City of Waterloo. One way to fix this issue would be to either include the type of city (e.g. City of, Township, etc.) for all cities or not include it for any of the cities. The issue with this approach is that the title is part of the official name for some of the cities and not for others, so it would inappropriate to force the names to be consistent in this case. The benefit of sticking to one method is that there will not be any duplicates, but forcing consistency may result in erroneous city names. &lt;/p&gt;
&lt;h4&gt;Conclusion&lt;/h4&gt;
&lt;p&gt;Although some of the inconsistent and incorrect data were fixed, there still remain some inconsistencies and errors. The street directions and types were mostly corrected for whereas the postal codes and city names remain inconsistent. Altering the postal codes to be more consistent is fairly straightforward whereas correcting the city names would pose a challenge.&lt;/p&gt;
&lt;p&gt;The script below wrangles the data and transforms the OpenStreetMap data into dictionaries that look like this:&lt;br&gt;
{
"id": "2406124091",
"type: "node",
"visible":"true",
"created": {
          "version":"2",
          "changeset":"17206049",
          "timestamp":"2013-08-03T16:43:42Z",
          "user":"linuxUser16",
          "uid":"1219059"
        },
"pos": [41.9757030, -87.6921867],
"address": {
          "housenumber": "5157",
          "postcode": "60625",
          "street": "North Lincoln Ave"
        },
"amenity": "restaurant",
"cuisine": "mexican",
"name": "La Cabana De Don Luis",
"phone": "1 (773)-271-5176"
}&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Only 2 types of top level tags are procssed: "node" and "way"&lt;/li&gt;
&lt;li&gt;All attributes of "node" and "way" are turned into regular key/value pairs, except:&lt;ul&gt;
&lt;li&gt;attributes in the CREATED array should be added under a key "created"&lt;/li&gt;
&lt;li&gt;attributes for latitude and longitude should be added to a "pos" array,
  for use in geospacial indexing. The values inside "pos" array are floats
  and not strings. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;if the second level tag "k" value contains problematic characters, it is ignored&lt;/li&gt;
&lt;li&gt;if the second level tag "k" value starts with "addr:", it is added to a dictionary "address"&lt;/li&gt;
&lt;li&gt;if the second level tag "k" value does not start with "addr:", but contains ":", it is processed
  as a regular tag&lt;/li&gt;
&lt;li&gt;if there is a second ":" that separates the type/direction of a street,
  the tag is ignored  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Import libraries&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;xml.etree.cElementTree&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;ET&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pprint&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;codecs&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;json&lt;/span&gt;

&lt;span class="n"&gt;lower&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^([a-z]|_)*$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;lower_colon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^([a-z]|_)*:([a-z]|_)*$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;problemchars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;[=\+/&amp;amp;&amp;lt;&amp;gt;;&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;&amp;quot;\?%#$@\,\. \t\r\n]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;street_type_re&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;\b\S+\.?$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IGNORECASE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;CREATED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;version&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;changeset&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;timestamp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;user&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;uid&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# List of expected street types&lt;/span&gt;
&lt;span class="n"&gt;expected&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Street&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Avenue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Boulevard&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Drive&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Court&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Place&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Square&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Lane&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Road&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
            &lt;span class="s2"&gt;&amp;quot;Trail&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Parkway&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Commons&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;11&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;116&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;12&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;124&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;13&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;14&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;15&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;154&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;16&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
           &lt;span class="s2"&gt;&amp;quot;17&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;18&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;20&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;21&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;22&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;24&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;30&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;32&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;34&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;45&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;51&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;6&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;7&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;86&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
           &lt;span class="s2"&gt;&amp;quot;9&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;97&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Baseline&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Boardwalk&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Circle&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Close&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Cove&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Crescent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Crestway&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Cross&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
           &lt;span class="s2"&gt;&amp;quot;Crossing&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;East&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;West&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;South&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;North&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Estates&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Gardens&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Gate&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Grove&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Heights&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Highway&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
           &lt;span class="s2"&gt;&amp;quot;Hill&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Hollow&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Line&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Walk&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Way&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Map of incorrect to correct street types&lt;/span&gt;
&lt;span class="n"&gt;mapping&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;St&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Street&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;St.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Street&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Ave&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Avenue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Rd.&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Road&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Rd&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Road&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;AVenue&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Avenue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Cresent&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Crescent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Dr&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Drive&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Dr.&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Drive&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;N&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;North&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;E&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;East&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;S&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;South&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;W&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;West&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;road&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Road&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;g&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;canadatrust.com&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;45th&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;45&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# Function to update the street types based on the mapping as defined above&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;update_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mapping&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;street_type_re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;mapping&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;mapping&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;()],&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;

&lt;span class="c1"&gt;# Function to update the problematic nodes&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;
    &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;attrib&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;v&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;startswith&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;addr:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;address&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;address&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;addr:street&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;update_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mapping&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;addr:postcode&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r&amp;#39;^[A-Z]\d[A-Z] \d[A-Z]\d$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
                    &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
            &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;address&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:]]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;


&lt;span class="c1"&gt;# Function to convert XML input to JSON output&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;shape_element&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;node&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;node&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;way&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;type&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tag&lt;/span&gt;
        &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;created&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;lat&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;lon&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="n"&gt;pos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;attrib&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;lat&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;attrib&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;lon&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])]&lt;/span&gt;
            &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pos&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pos&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;CREATED&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;created&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;
                &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;k&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;problemchars&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
                    &lt;span class="n"&gt;node&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ref&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;node_refs&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;node_refs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
                    &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;node_refs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;v&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lat&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lon&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
                    &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;
        &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;clear&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;

&lt;span class="c1"&gt;# Function that wrangles the data&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;process_map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_in&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pretty&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;file_out&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;{0}.json&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_in&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;codecs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;fo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;ET&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iterparse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_in&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;el&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;shape_element&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;el&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;el&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;pretty&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;fo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dumps&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;el&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;indent&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;fo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dumps&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;el&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;process_map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;waterloo-region_canada.osm&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;{&amp;#39;created&amp;#39;: {&amp;#39;changeset&amp;#39;: &amp;#39;38463820&amp;#39;,
             &amp;#39;timestamp&amp;#39;: &amp;#39;2016-04-11T01:35:40Z&amp;#39;,
             &amp;#39;uid&amp;#39;: &amp;#39;951370&amp;#39;,
             &amp;#39;user&amp;#39;: &amp;#39;fbax&amp;#39;,
             &amp;#39;version&amp;#39;: &amp;#39;1&amp;#39;},
 &amp;#39;id&amp;#39;: &amp;#39;409382133&amp;#39;,
 &amp;#39;node_refs&amp;#39;: [&amp;#39;4113058876&amp;#39;, &amp;#39;4113058877&amp;#39;, &amp;#39;4113058878&amp;#39;],
 &amp;#39;type&amp;#39;: &amp;#39;way&amp;#39;}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This script queries the database&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Import libraries&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;json&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pprint&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pymongo&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;MongoClient&lt;/span&gt;

&lt;span class="c1"&gt;# Initialize MongoDB client&lt;/span&gt;
&lt;span class="n"&gt;client&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;MongoClient&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;mongodb://localhost:27017&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;db&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;examples&lt;/span&gt;

&lt;span class="c1"&gt;# Print Postal Codes ordered by descending count&lt;/span&gt;
&lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;waterloo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;aggregate&lt;/span&gt;&lt;span class="p"&gt;([{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$match&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;address.postcode&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$exists&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}}},&lt;/span&gt;
                        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$group&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$address.postcode&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;count&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$sum&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}}},&lt;/span&gt;
                        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$sort&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;count&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}}])&lt;/span&gt;

&lt;span class="c1"&gt;# Print postal codes with count&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Postal Codes with count:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="c1"&gt;# Number of documents&lt;/span&gt;
&lt;span class="n"&gt;documents&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;waterloo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Number of documents:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;documents&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Number of nodes&lt;/span&gt;
&lt;span class="n"&gt;nodes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;waterloo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;node&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Number of nodes:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nodes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Number of ways&lt;/span&gt;
&lt;span class="n"&gt;ways&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;waterloo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;way&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Number of ways:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ways&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Number of unique users&lt;/span&gt;
&lt;span class="n"&gt;unique_users&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;waterloo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;aggregate&lt;/span&gt;&lt;span class="p"&gt;([{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$group&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$created.user&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$group&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;count&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$sum&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}}}])&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Number of unique users:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;unique_users&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pprint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Postal Codes with count:
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 4L7&amp;#39;, &amp;#39;count&amp;#39;: 105}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 4N3&amp;#39;, &amp;#39;count&amp;#39;: 99}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 4N2&amp;#39;, &amp;#39;count&amp;#39;: 75}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1A4&amp;#39;, &amp;#39;count&amp;#39;: 63}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 3V1&amp;#39;, &amp;#39;count&amp;#39;: 57}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 4C9&amp;#39;, &amp;#39;count&amp;#39;: 45}
{&amp;#39;_id&amp;#39;: &amp;#39;N2T 0A6&amp;#39;, &amp;#39;count&amp;#39;: 42}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 1K7&amp;#39;, &amp;#39;count&amp;#39;: 39}
{&amp;#39;_id&amp;#39;: &amp;#39;N2E 0A3&amp;#39;, &amp;#39;count&amp;#39;: 36}
{&amp;#39;_id&amp;#39;: &amp;#39;N3H 4R8&amp;#39;, &amp;#39;count&amp;#39;: 34}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 4M3&amp;#39;, &amp;#39;count&amp;#39;: 33}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1G9&amp;#39;, &amp;#39;count&amp;#39;: 30}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1C2&amp;#39;, &amp;#39;count&amp;#39;: 27}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1G8&amp;#39;, &amp;#39;count&amp;#39;: 27}
{&amp;#39;_id&amp;#39;: &amp;#39;N3H 4Z7&amp;#39;, &amp;#39;count&amp;#39;: 24}
{&amp;#39;_id&amp;#39;: &amp;#39;N2N 0B1&amp;#39;, &amp;#39;count&amp;#39;: 24}
{&amp;#39;_id&amp;#39;: &amp;#39;N2T 2Z7&amp;#39;, &amp;#39;count&amp;#39;: 24}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1C1&amp;#39;, &amp;#39;count&amp;#39;: 24}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 4N6&amp;#39;, &amp;#39;count&amp;#39;: 21}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 4G3&amp;#39;, &amp;#39;count&amp;#39;: 21}
{&amp;#39;_id&amp;#39;: &amp;#39;N2V 0A2&amp;#39;, &amp;#39;count&amp;#39;: 21}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1H7&amp;#39;, &amp;#39;count&amp;#39;: 18}
{&amp;#39;_id&amp;#39;: &amp;#39;N2E0A3&amp;#39;, &amp;#39;count&amp;#39;: 18}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 3H2&amp;#39;, &amp;#39;count&amp;#39;: 18}
{&amp;#39;_id&amp;#39;: &amp;#39;N3H4R8&amp;#39;, &amp;#39;count&amp;#39;: 17}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 4L9&amp;#39;, &amp;#39;count&amp;#39;: 15}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 4G1&amp;#39;, &amp;#39;count&amp;#39;: 15}
{&amp;#39;_id&amp;#39;: &amp;#39;N3H 2W7&amp;#39;, &amp;#39;count&amp;#39;: 15}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 4G2&amp;#39;, &amp;#39;count&amp;#39;: 15}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5Z4&amp;#39;, &amp;#39;count&amp;#39;: 14}
{&amp;#39;_id&amp;#39;: &amp;#39;N1S 1V6&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 3N1&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5S7&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N2N 3P8&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 3H3&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N0B 1B0&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N2R 0A4&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N0B 1N0&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N3C 1B7&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1G6&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1H9&amp;#39;, &amp;#39;count&amp;#39;: 12}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1A2&amp;#39;, &amp;#39;count&amp;#39;: 9}
{&amp;#39;_id&amp;#39;: &amp;#39;N2P 2E7&amp;#39;, &amp;#39;count&amp;#39;: 9}
{&amp;#39;_id&amp;#39;: &amp;#39;N0B 2R0&amp;#39;, &amp;#39;count&amp;#39;: 9}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 3V3&amp;#39;, &amp;#39;count&amp;#39;: 9}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 3V5&amp;#39;, &amp;#39;count&amp;#39;: 9}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1A3&amp;#39;, &amp;#39;count&amp;#39;: 9}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 3H1&amp;#39;, &amp;#39;count&amp;#39;: 9}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 3H6&amp;#39;, &amp;#39;count&amp;#39;: 9}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1H6&amp;#39;, &amp;#39;count&amp;#39;: 9}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3G5&amp;#39;, &amp;#39;count&amp;#39;: 8}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L5Z4&amp;#39;, &amp;#39;count&amp;#39;: 7}
{&amp;#39;_id&amp;#39;: &amp;#39;N2C 1K3&amp;#39;, &amp;#39;count&amp;#39;: 7}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1A5&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1E9&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 1W9&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 3G4&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 7H2&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 5C6&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 2X2&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3G1&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 4X6&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 3J3&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 1R1&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 8P1&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 1A1&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 2Y5&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N1T 1K7&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3V4&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N0B 1E0&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3E9&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 0C5&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6R5&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2R0A4&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 3Z3&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 1J9&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1H2&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2G9&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N3A 1E7&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1X4&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2E 1B6&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 4Z2&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 2E1&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N0B 1S0&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 4Z1&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N3A 1K1&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N1L 0A6&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6C2&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3L2&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2A 0E4&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N1M 3G4&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2C 1X1&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3V3&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 1P2&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1B7&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N1E 5R3&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2N 2Y2&amp;#39;, &amp;#39;count&amp;#39;: 6}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1H3&amp;#39;, &amp;#39;count&amp;#39;: 5}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 3H8&amp;#39;, &amp;#39;count&amp;#39;: 5}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 3H4&amp;#39;, &amp;#39;count&amp;#39;: 4}
{&amp;#39;_id&amp;#39;: &amp;#39;N0B 1K0&amp;#39;, &amp;#39;count&amp;#39;: 4}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 6J2&amp;#39;, &amp;#39;count&amp;#39;: 4}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6A1&amp;#39;, &amp;#39;count&amp;#39;: 4}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 3W1&amp;#39;, &amp;#39;count&amp;#39;: 4}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 4G3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 4C6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1K 1S5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 4S2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2T 0C1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1L 1G9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2A 4H4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1E 5H5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 5H7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 0A8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 0A7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 0A2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 6J4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3S2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 1P8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2H 2H1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2E 3W7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3L1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2H 4V2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 7W6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5W6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2N 3J2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 3Z4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6G6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1E 2Y9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 3Z6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 4Z2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6P5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2V 2J8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2Z6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 3Y8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5Z3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 3V7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1C3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1L 1C8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 4W2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2V 1V8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 2X6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6R2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3E6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3E7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 4N4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 1W4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 1W3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1W2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 2V3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1E 7C4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3B 2N0&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3H 3M4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1T6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3H 3M6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 2C6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1L 0J3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2N 2A8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2H 1Z4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2T 2Z4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 5A3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 4M4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 5S2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2H 2Z6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3E8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3L3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5G7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 4S7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2H 1A3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 3X3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1W5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1T 1Z9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 5L4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2V 2A9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2C 1P7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3B 2Y9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3B9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 3C9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 8L4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1P 1C7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2Y2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 3J5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 7R4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 0A9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 5N9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 1W7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 1A1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1T 1C0&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N0B 2M0&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2V 2G8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2R 0A3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 2T3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2N 1C1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1E3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3H 3G5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 4A2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2C 1X3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 6J8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3A 1E3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 1R9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1S 2H4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1T 2K8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 2N6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3A 1T6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3T7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2X4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1X1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6J3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1K 1X3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 2G4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2N8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 4W3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 7Y5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 5G6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1S 1P3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 8R3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 2M6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3A 1R3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 4V2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 4J4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 5J9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5G4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 3C5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2B 1E8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2H 6R4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 1Y4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2V 2R6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 4Z8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 4X7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 2J3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 3H3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2V 1B4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 1V4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2V 1C5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 3C2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 1X8&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2H 3X7&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1L 0Z6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2A 2Y2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2V 1C2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 0C6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2Y9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 3W1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 3P4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3A 1R1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2E 2M6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 0B3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2P 2G2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2E 4K6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1L 1G1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 4W1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1H6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3A 1J3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5E2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 3A4&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 3W3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 1V5&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3V1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 3T6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 1T2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2T 2W1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1E 7H1&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6E3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 3Y9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 1N9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 2J2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1H2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2T 3A3&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H 3T9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 3W6&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 3A2&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2X0&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1R9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 4W9&amp;#39;, &amp;#39;count&amp;#39;: 3}
{&amp;#39;_id&amp;#39;: &amp;#39;N3H 0A8&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 1H1&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6B5&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2A 3G6&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5P6&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1M8&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2C 2N9&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;n2j 2h4&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1V6&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1X5&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 4M3&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5J4&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R 3B2&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5V4&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2V9&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1A7&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2k  3T&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 3C5&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2W9&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2C1K3&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N1S 1H3&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K  3v&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1H1&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N1H6J2&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 3W4&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 5Z7&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1B7&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2H 6R2&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N0B1K0&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J 2X7&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2R 1S1&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M3W1&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 3N1&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 3H5&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2E 4H9&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2C 1A4&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L6A1&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L 6C1&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M 3R3&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G 0A9&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G 1A1&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J3H4&amp;#39;, &amp;#39;count&amp;#39;: 2}
{&amp;#39;_id&amp;#39;: &amp;#39;N3H0A8&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L1H1&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2E4H9&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L6B5&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2A3G6&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M3R3&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L5P6&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1H3&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M3H5&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N1S1H3&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2R1S1&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J3H8&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L5V4&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2k 3T6&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2H6R2&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1X5&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1A7&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G3N1&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2M3W4&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2C2N9&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L5Z7&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L4M3&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1A1&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J2W9&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L5J4&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L3G5&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G3C5&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1M8&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N1R3B2&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2K 3v3&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2L6C1&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1V6&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2C1A4&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1H1&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2G1B7&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N1G0A9&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J2X7&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;n2j2h4&amp;#39;, &amp;#39;count&amp;#39;: 1}
{&amp;#39;_id&amp;#39;: &amp;#39;N2J2V9&amp;#39;, &amp;#39;count&amp;#39;: 1}
Number of documents:
2289153
Number of nodes:
2011086
Number of ways:
278067
Number of unique users:
{&amp;#39;_id&amp;#39;: 1, &amp;#39;count&amp;#39;: 503}
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Udacity Engagement Analysis</title><link href="/udacity-engagement-analysis.html" rel="alternate"></link><published>2016-03-16T00:00:00+00:00</published><updated>2016-03-16T00:00:00+00:00</updated><author><name></name></author><id>tag:None,2016-03-16:/udacity-engagement-analysis.html</id><summary type="html">&lt;h2&gt;Loading Data from CSVs&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Import csv library&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;unicodecsv&lt;/span&gt;

&lt;span class="c1"&gt;# Define function to read and store data&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;rb&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;unicodecsv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DictReader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;enrollments&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data/enrollments.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;daily_engagement&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data/daily_engagement.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;project_submissions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data/project_submissions.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Print out first …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;h2&gt;Loading Data from CSVs&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Import csv library&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;unicodecsv&lt;/span&gt;

&lt;span class="c1"&gt;# Define function to read and store data&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;rb&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;unicodecsv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DictReader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;enrollments&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data/enrollments.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;daily_engagement&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data/daily_engagement.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;project_submissions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data/project_submissions.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Print out first element of each list&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Enrollments:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollments&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Daily engagement:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;daily_engagement&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Project submissions:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;project_submissions&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Enrollments:
{&amp;#39;cancel_date&amp;#39;: &amp;#39;2015-01-14&amp;#39;, &amp;#39;join_date&amp;#39;: &amp;#39;2014-11-10&amp;#39;, &amp;#39;days_to_cancel&amp;#39;: &amp;#39;65&amp;#39;, &amp;#39;account_key&amp;#39;: &amp;#39;448&amp;#39;, &amp;#39;is_canceled&amp;#39;: &amp;#39;True&amp;#39;, &amp;#39;status&amp;#39;: &amp;#39;canceled&amp;#39;, &amp;#39;is_udacity&amp;#39;: &amp;#39;True&amp;#39;}
Daily engagement:
{&amp;#39;total_minutes_visited&amp;#39;: &amp;#39;11.6793745&amp;#39;, &amp;#39;acct&amp;#39;: &amp;#39;0&amp;#39;, &amp;#39;num_courses_visited&amp;#39;: &amp;#39;1.0&amp;#39;, &amp;#39;utc_date&amp;#39;: &amp;#39;2015-01-09&amp;#39;, &amp;#39;projects_completed&amp;#39;: &amp;#39;0.0&amp;#39;, &amp;#39;lessons_completed&amp;#39;: &amp;#39;0.0&amp;#39;}
Project submissions:
{&amp;#39;account_key&amp;#39;: &amp;#39;256&amp;#39;, &amp;#39;lesson_key&amp;#39;: &amp;#39;3176718735&amp;#39;, &amp;#39;creation_date&amp;#39;: &amp;#39;2015-01-14&amp;#39;, &amp;#39;assigned_rating&amp;#39;: &amp;#39;UNGRADED&amp;#39;, &amp;#39;processing_state&amp;#39;: &amp;#39;EVALUATED&amp;#39;, &amp;#39;completion_date&amp;#39;: &amp;#39;2015-01-16&amp;#39;}
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Fixing Data Types&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Import library&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;

&lt;span class="c1"&gt;# Takes a date as a string, and returns a Python datetime object &lt;/span&gt;
&lt;span class="c1"&gt;# If there is no date given, returns None&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;parse_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strptime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%Y-%m-&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Takes a string which is either an empty string or represents an integer&lt;/span&gt;
&lt;span class="c1"&gt;# and returns an int or None.&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;parse_maybe_int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Clean up the data types in the enrollments table&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;enrollments&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;cancel_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;parse_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;cancel_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;days_to_cancel&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;parse_maybe_int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;days_to_cancel&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;is_canceled&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;is_canceled&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;True&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;is_udacity&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;is_udacity&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;True&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;join_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;parse_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;join_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Enrollments:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;enrollments&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Enrollments:





{&amp;#39;account_key&amp;#39;: &amp;#39;448&amp;#39;,
 &amp;#39;cancel_date&amp;#39;: datetime.datetime(2015, 1, 14, 0, 0),
 &amp;#39;days_to_cancel&amp;#39;: 65,
 &amp;#39;is_canceled&amp;#39;: True,
 &amp;#39;is_udacity&amp;#39;: True,
 &amp;#39;join_date&amp;#39;: datetime.datetime(2014, 11, 10, 0, 0),
 &amp;#39;status&amp;#39;: &amp;#39;canceled&amp;#39;}
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Clean up the data types in the engagement table&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;daily_engagement&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lessons_completed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lessons_completed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
    &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;num_courses_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;num_courses_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
    &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;projects_completed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;projects_completed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
    &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;total_minutes_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;total_minutes_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utc_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;parse_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utc_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Daily engagement:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;daily_engagement&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Daily engagement:





{&amp;#39;acct&amp;#39;: &amp;#39;0&amp;#39;,
 &amp;#39;lessons_completed&amp;#39;: 0,
 &amp;#39;num_courses_visited&amp;#39;: 1,
 &amp;#39;projects_completed&amp;#39;: 0,
 &amp;#39;total_minutes_visited&amp;#39;: 11.6793745,
 &amp;#39;utc_date&amp;#39;: datetime.datetime(2015, 1, 9, 0, 0)}
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Clean up the data types in the submissions table&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;submission&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;project_submissions&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;submission&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;completion_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;parse_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;submission&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;completion_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;submission&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;creation_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;parse_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;submission&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;creation_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Project submissions:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;project_submissions&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Project submissions:





{&amp;#39;account_key&amp;#39;: &amp;#39;256&amp;#39;,
 &amp;#39;assigned_rating&amp;#39;: &amp;#39;UNGRADED&amp;#39;,
 &amp;#39;completion_date&amp;#39;: datetime.datetime(2015, 1, 16, 0, 0),
 &amp;#39;creation_date&amp;#39;: datetime.datetime(2015, 1, 14, 0, 0),
 &amp;#39;lesson_key&amp;#39;: &amp;#39;3176718735&amp;#39;,
 &amp;#39;processing_state&amp;#39;: &amp;#39;EVALUATED&amp;#39;}
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Investigating the Data&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Rename the &amp;quot;acct&amp;quot; column in the daily_engagement table to &amp;quot;account_key&amp;quot;.&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;daily_engagement&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;acct&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;acct&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Daily engagement - account key:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;daily_engagement&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Daily engagement - account key:





&amp;#39;0&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Define function to get unique students&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_unique_students&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;unique_students&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;data_point&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;unique_students&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_point&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;unique_students&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Total number of rows and the number of unique students (account keys)&lt;/span&gt;
&lt;span class="c1"&gt;# in each table.&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Total enrollment records:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollments&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;unique_enrolled_students&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_unique_students&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollments&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Total unique enrollment records:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;unique_enrolled_students&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Total daily engagement records:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;daily_engagement&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;unique_engagement_students&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;unique_engagement_students&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_unique_students&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;daily_engagement&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Total unique daily engagement records:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;unique_engagement_students&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Total project submission records:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;project_submissions&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;unique_project_submitters&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_unique_students&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;project_submissions&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Total unique project submission records:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;unique_project_submitters&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Total enrollment records:
1640
Total unique enrollment records:
1302
Total daily engagement records:
136240
Total unique daily engagement records:
1237
Total project submission records:
3642
Total unique project submission records:
743
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Problems in the Data&lt;/h2&gt;
&lt;h2&gt;Missing Engagement Records&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Find one student enrollments where the student is missing from the daily engagement table&lt;/span&gt;
&lt;span class="c1"&gt;# Output that enrollment&lt;/span&gt;

&lt;span class="n"&gt;counter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;enrollments&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;student&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;student&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;unique_engagement_students&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Enrollment:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;break&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Enrollment:
{&amp;#39;cancel_date&amp;#39;: datetime.datetime(2014, 11, 12, 0, 0), &amp;#39;join_date&amp;#39;: datetime.datetime(2014, 11, 12, 0, 0), &amp;#39;days_to_cancel&amp;#39;: 0, &amp;#39;account_key&amp;#39;: &amp;#39;1219&amp;#39;, &amp;#39;is_canceled&amp;#39;: True, &amp;#39;status&amp;#39;: &amp;#39;canceled&amp;#39;, &amp;#39;is_udacity&amp;#39;: False}
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Checking for More Problem Records&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Find the number of surprising data points (enrollments missing from&lt;/span&gt;
&lt;span class="c1"&gt;# the engagement table) that remain, if any&lt;/span&gt;

&lt;span class="n"&gt;counter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;enrollments&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;student&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;student&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;unique_engagement_students&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;days_to_cancel&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Enrollment:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Counter:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Enrollment:
{&amp;#39;cancel_date&amp;#39;: datetime.datetime(2015, 3, 10, 0, 0), &amp;#39;join_date&amp;#39;: datetime.datetime(2015, 1, 10, 0, 0), &amp;#39;days_to_cancel&amp;#39;: 59, &amp;#39;account_key&amp;#39;: &amp;#39;1304&amp;#39;, &amp;#39;is_canceled&amp;#39;: True, &amp;#39;status&amp;#39;: &amp;#39;canceled&amp;#39;, &amp;#39;is_udacity&amp;#39;: True}
Enrollment:
{&amp;#39;cancel_date&amp;#39;: datetime.datetime(2015, 6, 17, 0, 0), &amp;#39;join_date&amp;#39;: datetime.datetime(2015, 3, 10, 0, 0), &amp;#39;days_to_cancel&amp;#39;: 99, &amp;#39;account_key&amp;#39;: &amp;#39;1304&amp;#39;, &amp;#39;is_canceled&amp;#39;: True, &amp;#39;status&amp;#39;: &amp;#39;canceled&amp;#39;, &amp;#39;is_udacity&amp;#39;: True}
Enrollment:
{&amp;#39;cancel_date&amp;#39;: None, &amp;#39;join_date&amp;#39;: datetime.datetime(2015, 2, 25, 0, 0), &amp;#39;days_to_cancel&amp;#39;: None, &amp;#39;account_key&amp;#39;: &amp;#39;1101&amp;#39;, &amp;#39;is_canceled&amp;#39;: False, &amp;#39;status&amp;#39;: &amp;#39;current&amp;#39;, &amp;#39;is_udacity&amp;#39;: True}
Counter:
3
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Tracking Down the Remaining Problems&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Create a set of the account keys for all Udacity test accounts&lt;/span&gt;
&lt;span class="n"&gt;udacity_test_accounts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;enrollments&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;is_udacity&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="n"&gt;udacity_test_accounts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Number of Udacity test accounts:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;        
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;udacity_test_accounts&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Number of Udacity test accounts:
6
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Given some data with an account_key field, removes any records corresponding to Udacity test accounts&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;remove_udacity_accounts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;non_udacity_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;data_point&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;data_point&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;udacity_test_accounts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;non_udacity_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_point&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;non_udacity_data&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Remove Udacity test accounts from all three tables&lt;/span&gt;
&lt;span class="n"&gt;non_udacity_enrollments&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;remove_udacity_accounts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;enrollments&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;non_udacity_engagement&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;remove_udacity_accounts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;daily_engagement&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;non_udacity_submissions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;remove_udacity_accounts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;project_submissions&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Non Udacity enrollments:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_udacity_enrollments&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Non Udacity engagements:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_udacity_engagement&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Non Udacity submissions:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_udacity_submissions&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Non Udacity enrollments:
1622
Non Udacity engagements:
135656
Non Udacity submissions:
3634
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Refining the Question&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Creates a dictionary named paid_students containing all students who either&lt;/span&gt;
&lt;span class="c1"&gt;# haven&amp;#39;t canceled yet or who remained enrolled for more than 7 days. The keys&lt;/span&gt;
&lt;span class="c1"&gt;# are account keys, and the values are the date the student enrolled&lt;/span&gt;

&lt;span class="n"&gt;paid_students&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;non_udacity_enrollments&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;is_canceled&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;days_to_cancel&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;account_key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;enrollment_date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enrollment&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;join_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;paid_students&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enrollment_date&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;account_key&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;paid_students&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; \
                &lt;span class="n"&gt;enrollment_date&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;paid_students&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
            &lt;span class="n"&gt;paid_students&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enrollment_date&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Paid students:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paid_students&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;       
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Paid students:
995
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Getting Data from First Week&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Takes a student&amp;#39;s join date and the date of a specific engagement record,&lt;/span&gt;
&lt;span class="c1"&gt;# and returns True if that engagement record happened within one week&lt;/span&gt;
&lt;span class="c1"&gt;# of the student joining.&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;within_one_week&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;join_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;engagement_date&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;time_delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;engagement_date&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;join_date&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;time_delta&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;time_delta&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Creates a list of rows from the engagement table including only rows where&lt;/span&gt;
&lt;span class="c1"&gt;# the student is one of the paid students we just found, and the date is within&lt;/span&gt;
&lt;span class="c1"&gt;# one week of the student&amp;#39;s join date&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;remove_free_trial_cancels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;new_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;data_point&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;data_point&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;paid_students&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;new_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_point&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;new_data&lt;/span&gt;

&lt;span class="n"&gt;paid_enrollments&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;remove_free_trial_cancels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_udacity_enrollments&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;paid_engagement&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;remove_free_trial_cancels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_udacity_engagement&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;paid_submissions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;remove_free_trial_cancels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_udacity_submissions&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Paid enrollments:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paid_enrollments&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Paid engagements:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paid_engagement&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Paid submissions:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paid_submissions&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;paid_engagement_in_first_week&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;paid_engagement&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;account_key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;join_date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;paid_students&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;engagement_record_date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utc_date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;within_one_week&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;join_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;engagement_record_date&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;paid_engagement_in_first_week&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Paid engagements in first week:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paid_engagement_in_first_week&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Paid enrollments:
1293
Paid engagements:
134549
Paid submissions:
3618
Paid engagements in first week:
6920
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Exploring Student Engagement&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Import library&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;collections&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;defaultdict&lt;/span&gt;

&lt;span class="c1"&gt;# Creates a dictionary of engagement grouped by student&lt;/span&gt;
&lt;span class="c1"&gt;# The keys are account keys, and the values are lists of engagement records.&lt;/span&gt;
&lt;span class="n"&gt;engagement_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;defaultdict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;paid_engagement_in_first_week&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;account_key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Creates a dictionary with the total minutes each student spent in the classroom during the first week&lt;/span&gt;
&lt;span class="c1"&gt;# The keys are account keys, and the values are numbers (total minutes)&lt;/span&gt;
&lt;span class="n"&gt;total_minutes_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;engagement_for_student&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;engagement_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;total_minutes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;engagement_for_student&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;total_minutes&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;total_minutes_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;total_minutes_by_account&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;total_minutes&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#Import library&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;

&lt;span class="c1"&gt;# Summarize the data about minutes spent in the classroom&lt;/span&gt;
&lt;span class="n"&gt;total_minutes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_minutes_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Mean:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_minutes&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Standard deviation:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_minutes&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Minimum:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_minutes&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Maximum:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_minutes&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Mean&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;305.414718908&lt;/span&gt;
&lt;span class="n"&gt;Standard&lt;/span&gt; &lt;span class="n"&gt;deviation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;405.91261032&lt;/span&gt;
&lt;span class="n"&gt;Minimum&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;0.0&lt;/span&gt;
&lt;span class="n"&gt;Maximum&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;3564.7332645&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Debugging Data Analysis Code&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Goes through a similar process as before to see if there is a problem&lt;/span&gt;
&lt;span class="c1"&gt;# Locates at least one surprising piece of data and outputs it&lt;/span&gt;
&lt;span class="n"&gt;student_with_max_minutes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
&lt;span class="n"&gt;max_minutes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;student&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_minutes&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;total_minutes_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;total_minutes&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;max_minutes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;max_minutes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;total_minutes&lt;/span&gt;
        &lt;span class="n"&gt;student_with_max_minutes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;student&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Max minutes:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_minutes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;paid_engagement_in_first_week&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;student_with_max_minutes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Engagement record:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Max minutes:
3564.7332644989997
Engagement record:
{&amp;#39;total_minutes_visited&amp;#39;: 850.519339666, &amp;#39;num_courses_visited&amp;#39;: 4, &amp;#39;account_key&amp;#39;: &amp;#39;163&amp;#39;, &amp;#39;utc_date&amp;#39;: datetime.datetime(2015, 7, 9, 0, 0), &amp;#39;projects_completed&amp;#39;: 0, &amp;#39;lessons_completed&amp;#39;: 4}
Engagement record:
{&amp;#39;total_minutes_visited&amp;#39;: 872.633923334, &amp;#39;num_courses_visited&amp;#39;: 6, &amp;#39;account_key&amp;#39;: &amp;#39;163&amp;#39;, &amp;#39;utc_date&amp;#39;: datetime.datetime(2015, 7, 10, 0, 0), &amp;#39;projects_completed&amp;#39;: 0, &amp;#39;lessons_completed&amp;#39;: 6}
Engagement record:
{&amp;#39;total_minutes_visited&amp;#39;: 777.018903666, &amp;#39;num_courses_visited&amp;#39;: 2, &amp;#39;account_key&amp;#39;: &amp;#39;163&amp;#39;, &amp;#39;utc_date&amp;#39;: datetime.datetime(2015, 7, 11, 0, 0), &amp;#39;projects_completed&amp;#39;: 0, &amp;#39;lessons_completed&amp;#39;: 6}
Engagement record:
{&amp;#39;total_minutes_visited&amp;#39;: 294.568774, &amp;#39;num_courses_visited&amp;#39;: 1, &amp;#39;account_key&amp;#39;: &amp;#39;163&amp;#39;, &amp;#39;utc_date&amp;#39;: datetime.datetime(2015, 7, 12, 0, 0), &amp;#39;projects_completed&amp;#39;: 0, &amp;#39;lessons_completed&amp;#39;: 2}
Engagement record:
{&amp;#39;total_minutes_visited&amp;#39;: 471.2139785, &amp;#39;num_courses_visited&amp;#39;: 3, &amp;#39;account_key&amp;#39;: &amp;#39;163&amp;#39;, &amp;#39;utc_date&amp;#39;: datetime.datetime(2015, 7, 13, 0, 0), &amp;#39;projects_completed&amp;#39;: 0, &amp;#39;lessons_completed&amp;#39;: 1}
Engagement record:
{&amp;#39;total_minutes_visited&amp;#39;: 298.778345333, &amp;#39;num_courses_visited&amp;#39;: 2, &amp;#39;account_key&amp;#39;: &amp;#39;163&amp;#39;, &amp;#39;utc_date&amp;#39;: datetime.datetime(2015, 7, 14, 0, 0), &amp;#39;projects_completed&amp;#39;: 0, &amp;#39;lessons_completed&amp;#39;: 1}
Engagement record:
{&amp;#39;total_minutes_visited&amp;#39;: 0.0, &amp;#39;num_courses_visited&amp;#39;: 0, &amp;#39;account_key&amp;#39;: &amp;#39;163&amp;#39;, &amp;#39;utc_date&amp;#39;: datetime.datetime(2015, 7, 15, 0, 0), &amp;#39;projects_completed&amp;#39;: 0, &amp;#39;lessons_completed&amp;#39;: 0}
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Lessons Completed in First Week&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Adapts the code above to find the mean, standard deviation, minimum, and maximum for&lt;/span&gt;
&lt;span class="c1"&gt;# the number of lessons completed by each student during the first week&lt;/span&gt;

&lt;span class="c1"&gt;# Load library&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;collections&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;defaultdict&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;group_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;key_name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;grouped_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;defaultdict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;data_point&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_point&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key_name&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;grouped_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_point&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;grouped_data&lt;/span&gt;

&lt;span class="n"&gt;engagement_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;group_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paid_engagement_in_first_week&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                   &lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;grouped_data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;field_name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;summed_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_points&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;grouped_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;data_point&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data_points&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;data_point&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;field_name&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;summed_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;summed_data&lt;/span&gt;

&lt;span class="n"&gt;total_minutes_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                             &lt;span class="s1"&gt;&amp;#39;total_minutes_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;describe_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Mean:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Standard deviation:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Minimum:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Maximum:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Total minutes by account:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;describe_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_minutes_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())))&lt;/span&gt;

&lt;span class="n"&gt;lessons_completed_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;lessons_completed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Lessons completed by account:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;describe_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lessons_completed_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Total minutes by account:
Mean: 305.414718908
Standard deviation: 405.91261032
Minimum: 0.0
Maximum: 3564.7332645
Lessons completed by account:
Mean: 1.63216080402
Standard deviation: 3.00140182563
Minimum: 0
Maximum: 36
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Number of Visits in First Week&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Finds the mean, standard deviation, minimum, and maximum for the number of&lt;/span&gt;
&lt;span class="c1"&gt;# days each student visits the classroom during the first week&lt;/span&gt;

&lt;span class="n"&gt;engagement_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;group_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paid_engagement_in_first_week&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                   &lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;engagement_for_student&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;engagement_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;data_points&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;engagement_for_student&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;data_points&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;num_courses_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;data_points&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;has_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;data_points&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;has_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;has_visited_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;has_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Students that visited in first week:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;describe_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;has_visited_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Students that visited in first week:
Mean: 2.91256281407
Standard deviation: 2.22037005491
Minimum: 0
Maximum: 7
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Splitting out Passing Students&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Creates two lists of engagement data for paid students in the first week&lt;/span&gt;
&lt;span class="c1"&gt;# The first list contains data for students who eventually pass the&lt;/span&gt;
&lt;span class="c1"&gt;# subway project, and the second list contains data for students&lt;/span&gt;
&lt;span class="c1"&gt;# who do not&lt;/span&gt;

&lt;span class="n"&gt;subway_project_lesson_keys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;746169184&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;3176718735&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;pass_subway_project&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;passing_engagement&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="n"&gt;non_passing_engagement&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;submission&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;paid_submissions&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;project&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;submission&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lesson_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;rating&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;submission&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;assigned_rating&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;subway_project_lesson_keys&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rating&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;PASSED&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;rating&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;DISTINCTION&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
        &lt;span class="n"&gt;pass_subway_project&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;submission&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;


&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;paid_engagement_in_first_week&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;pass_subway_project&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;passing_engagement&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;non_passing_engagement&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;engagement_record&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Passing engagement:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passing_engagement&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Non passing engagement&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_passing_engagement&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;           
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Passing engagement:
4528
Non passing engagement
2392
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Comparing the Two Student Groups&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Computes some metrics that are interesting and see how they differ for&lt;/span&gt;
&lt;span class="c1"&gt;# students who pass the subway project vs. students who don&amp;#39;t&lt;/span&gt;

&lt;span class="n"&gt;passing_engagement_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;group_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passing_engagement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                   &lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;has_visited_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passing_engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;has_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Has visited by account:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;describe_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;has_visited_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())))&lt;/span&gt;

&lt;span class="n"&gt;non_passing_engagement_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;group_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_passing_engagement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                   &lt;span class="s1"&gt;&amp;#39;account_key&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;non_has_visited_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_passing_engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;has_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Has not visited by account:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;describe_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_has_visited_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Has visited by account:
Mean: 3.42967542504
Standard deviation: 2.21298340866
Minimum: 0
Maximum: 7
Has not visited by account:
Mean: 1.95114942529
Standard deviation: 1.88929952676
Minimum: 0
Maximum: 7
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Making Histograms&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Makes histograms of the three metrics we looked at earlier for both&lt;/span&gt;
&lt;span class="c1"&gt;# students who passed the subway project and students who didn&amp;#39;t&lt;/span&gt;

&lt;span class="c1"&gt;# Ensure plot is displayed in notebook&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;pylab&lt;/span&gt; &lt;span class="n"&gt;inline&lt;/span&gt;

&lt;span class="c1"&gt;# Load libraries&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;seaborn&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;sns&lt;/span&gt;

&lt;span class="n"&gt;has_minutes_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passing_engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;total_minutes_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;non_has_minutes_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_passing_engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;total_minutes_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;has_lessons_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passing_engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;lessons_completed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;non_has_lessons_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_passing_engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;lessons_completed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;has_visited_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passing_engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;has_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;non_has_visited_by_account&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_grouped_items&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_passing_engagement_by_account&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                 &lt;span class="s1"&gt;&amp;#39;has_visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;has_mins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;records&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;has_minutes_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;has_mins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;records&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;has_mins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Minutes by account&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Days Visited&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;non_has_mins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;records&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;non_has_minutes_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;non_has_mins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;records&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_has_mins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Non Minutes by account&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Days Visited&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;has_lessons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;records&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;has_lessons_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;has_lessons&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;records&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;has_lessons&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Has lessons&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Days Visited&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;non_has_lessons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;records&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;non_has_lessons_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;non_has_lessons&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;records&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_has_lessons&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Non has lessons&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Days Visited&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;has_visited&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;records&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;has_visited_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;has_visited&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;records&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;has_visited&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Has visited&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Days Visited&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;non_has_visited&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;account_key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;records&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;non_has_visited_by_account&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;non_has_visited&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;records&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;non_has_visited&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Non has visisted&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Days Visited&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Populating the interactive namespace from numpy and matplotlib





&amp;lt;matplotlib.text.Text at 0x10e3f6080&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="/images/UdacityEngagementAnalysis_39_2.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/UdacityEngagementAnalysis_39_3.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/UdacityEngagementAnalysis_39_4.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/UdacityEngagementAnalysis_39_5.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/UdacityEngagementAnalysis_39_6.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/UdacityEngagementAnalysis_39_7.png"&gt;&lt;/p&gt;</content></entry><entry><title>Introduction to Research Methods</title><link href="/introduction-to-research-methods.html" rel="alternate"></link><published>2015-09-19T00:00:00+00:00</published><updated>2015-09-19T00:00:00+00:00</updated><author><name></name></author><id>tag:None,2015-09-19:/introduction-to-research-methods.html</id><summary type="html">&lt;h1&gt;Introduction To Research Methods&lt;/h1&gt;
&lt;h2&gt;Chopsticks&lt;/h2&gt;
&lt;p&gt;A few researchers set out to determine the optimal length of chopsticks for children and adults. They came up with a measure of how effective a pair of chopsticks performed, called the "Food Pinching Performance." The "Food Pinching Performance" was determined by counting the number …&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Introduction To Research Methods&lt;/h1&gt;
&lt;h2&gt;Chopsticks&lt;/h2&gt;
&lt;p&gt;A few researchers set out to determine the optimal length of chopsticks for children and adults. They came up with a measure of how effective a pair of chopsticks performed, called the "Food Pinching Performance." The "Food Pinching Performance" was determined by counting the number of peanuts picked and placed in a cup (PPPC).  &lt;/p&gt;
&lt;p&gt;An investigation for determining the optimum length of chopsticks.&lt;br&gt;
&lt;a href="https://www.ncbi.nlm.nih.gov/pubmed/15676839"&gt;Link to Abstract and Paper&lt;/a&gt;&lt;br&gt;
&lt;em&gt;the abstract below was adapted from the link&lt;/em&gt;  &lt;/p&gt;
&lt;p&gt;Chopsticks are one of the most simple and popular hand tools ever invented by humans, but have not previously been investigated by ergonomists. Two laboratory studies were conducted in this research, using a randomised complete block design, to evaluate the effects of the length of the chopsticks on the food-serving performance of adults and children. Thirty-one male junior college students and 21 primary school pupils served as subjects for the experiment to test chopsticks lengths of 180, 210, 240, 270, 300, and 330 mm. The results showed that the food-pinching performance was significantly affected by the length of the chopsticks, and that chopsticks of about 240 and 180 mm long were optimal for adults and pupils, respectively. Based on these findings, the researchers suggested that families with children should provide both 240 and 180 mm long chopsticks. In addition, restaurants could provide 210 mm long chopsticks, considering the trade-offs between ergonomics and cost.&lt;br&gt;
The analysis below is based only on the part of the experiment analyzing the thirty-one adult male college students.&lt;br&gt;
The dataset can be found &lt;a href="https://storage.googleapis.com/supplemental_media/udacityu/4576183932/chopstick-effectiveness.csv"&gt;here&lt;/a&gt;.  &lt;/p&gt;
&lt;h5&gt;Independent variable in the experiment:&lt;/h5&gt;
&lt;p&gt;Chopstick Length  &lt;/p&gt;
&lt;h5&gt;Dependent variable in the experiment:&lt;/h5&gt;
&lt;p&gt;Food Pinching Efficiency  &lt;/p&gt;
&lt;h5&gt;How is the dependent variable operationally defined?&lt;/h5&gt;
&lt;p&gt;By counting the number of peanuts picked and placed in a cup (PPPC)  &lt;/p&gt;
&lt;h5&gt;Variables that were controlled:&lt;/h5&gt;
&lt;p&gt;Age and Gender  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Pandas is a software library for data manipulation and analysis&lt;/span&gt;
&lt;span class="c1"&gt;# We commonly use shorter nicknames for certain packages. Pandas is often abbreviated to pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;

&lt;span class="c1"&gt;# Change the path to the location where the chopstick-effectiveness.csv file is located on your computer&lt;/span&gt;
&lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;~/Documents/Projects/IntroToResearchMethods_Chopsticks/chopstick-effectiveness.csv&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# Read and print data&lt;/span&gt;
&lt;span class="n"&gt;dataFrame&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;dataFrame&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;Food.Pinching.Efficiency&lt;/th&gt;
      &lt;th&gt;Individual&lt;/th&gt;
      &lt;th&gt;Chopstick.Length&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;19.55&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;27.24&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;28.76&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;31.19&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;21.91&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;5&lt;/th&gt;
      &lt;td&gt;27.62&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;6&lt;/th&gt;
      &lt;td&gt;29.46&lt;/td&gt;
      &lt;td&gt;7&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;7&lt;/th&gt;
      &lt;td&gt;26.35&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;8&lt;/th&gt;
      &lt;td&gt;26.69&lt;/td&gt;
      &lt;td&gt;9&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;9&lt;/th&gt;
      &lt;td&gt;30.22&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;10&lt;/th&gt;
      &lt;td&gt;27.81&lt;/td&gt;
      &lt;td&gt;11&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;11&lt;/th&gt;
      &lt;td&gt;23.46&lt;/td&gt;
      &lt;td&gt;12&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;12&lt;/th&gt;
      &lt;td&gt;23.64&lt;/td&gt;
      &lt;td&gt;13&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;13&lt;/th&gt;
      &lt;td&gt;27.85&lt;/td&gt;
      &lt;td&gt;14&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;14&lt;/th&gt;
      &lt;td&gt;20.62&lt;/td&gt;
      &lt;td&gt;15&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;15&lt;/th&gt;
      &lt;td&gt;25.35&lt;/td&gt;
      &lt;td&gt;16&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;16&lt;/th&gt;
      &lt;td&gt;28.00&lt;/td&gt;
      &lt;td&gt;17&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;17&lt;/th&gt;
      &lt;td&gt;23.49&lt;/td&gt;
      &lt;td&gt;18&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;18&lt;/th&gt;
      &lt;td&gt;27.77&lt;/td&gt;
      &lt;td&gt;19&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;19&lt;/th&gt;
      &lt;td&gt;18.48&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;20&lt;/th&gt;
      &lt;td&gt;23.01&lt;/td&gt;
      &lt;td&gt;21&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;21&lt;/th&gt;
      &lt;td&gt;22.66&lt;/td&gt;
      &lt;td&gt;22&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;22&lt;/th&gt;
      &lt;td&gt;23.24&lt;/td&gt;
      &lt;td&gt;23&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;23&lt;/th&gt;
      &lt;td&gt;22.82&lt;/td&gt;
      &lt;td&gt;24&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;24&lt;/th&gt;
      &lt;td&gt;17.94&lt;/td&gt;
      &lt;td&gt;25&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;25&lt;/th&gt;
      &lt;td&gt;26.67&lt;/td&gt;
      &lt;td&gt;26&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;26&lt;/th&gt;
      &lt;td&gt;28.98&lt;/td&gt;
      &lt;td&gt;27&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;27&lt;/th&gt;
      &lt;td&gt;21.48&lt;/td&gt;
      &lt;td&gt;28&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;28&lt;/th&gt;
      &lt;td&gt;14.47&lt;/td&gt;
      &lt;td&gt;29&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;29&lt;/th&gt;
      &lt;td&gt;28.29&lt;/td&gt;
      &lt;td&gt;30&lt;/td&gt;
      &lt;td&gt;180&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;...&lt;/th&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;156&lt;/th&gt;
      &lt;td&gt;26.18&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;157&lt;/th&gt;
      &lt;td&gt;25.93&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;158&lt;/th&gt;
      &lt;td&gt;28.61&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;159&lt;/th&gt;
      &lt;td&gt;20.54&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;160&lt;/th&gt;
      &lt;td&gt;26.44&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;161&lt;/th&gt;
      &lt;td&gt;29.36&lt;/td&gt;
      &lt;td&gt;7&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;162&lt;/th&gt;
      &lt;td&gt;19.77&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;163&lt;/th&gt;
      &lt;td&gt;31.69&lt;/td&gt;
      &lt;td&gt;9&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;164&lt;/th&gt;
      &lt;td&gt;24.64&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;165&lt;/th&gt;
      &lt;td&gt;22.09&lt;/td&gt;
      &lt;td&gt;11&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;166&lt;/th&gt;
      &lt;td&gt;23.42&lt;/td&gt;
      &lt;td&gt;12&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;167&lt;/th&gt;
      &lt;td&gt;28.63&lt;/td&gt;
      &lt;td&gt;13&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;168&lt;/th&gt;
      &lt;td&gt;26.30&lt;/td&gt;
      &lt;td&gt;14&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;169&lt;/th&gt;
      &lt;td&gt;22.89&lt;/td&gt;
      &lt;td&gt;15&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;170&lt;/th&gt;
      &lt;td&gt;22.68&lt;/td&gt;
      &lt;td&gt;16&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;171&lt;/th&gt;
      &lt;td&gt;30.92&lt;/td&gt;
      &lt;td&gt;17&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;172&lt;/th&gt;
      &lt;td&gt;20.74&lt;/td&gt;
      &lt;td&gt;18&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;173&lt;/th&gt;
      &lt;td&gt;27.24&lt;/td&gt;
      &lt;td&gt;19&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;174&lt;/th&gt;
      &lt;td&gt;17.12&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;175&lt;/th&gt;
      &lt;td&gt;23.63&lt;/td&gt;
      &lt;td&gt;21&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;176&lt;/th&gt;
      &lt;td&gt;20.91&lt;/td&gt;
      &lt;td&gt;22&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;177&lt;/th&gt;
      &lt;td&gt;23.49&lt;/td&gt;
      &lt;td&gt;23&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;178&lt;/th&gt;
      &lt;td&gt;24.86&lt;/td&gt;
      &lt;td&gt;24&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;179&lt;/th&gt;
      &lt;td&gt;16.28&lt;/td&gt;
      &lt;td&gt;25&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;180&lt;/th&gt;
      &lt;td&gt;21.52&lt;/td&gt;
      &lt;td&gt;26&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;181&lt;/th&gt;
      &lt;td&gt;27.22&lt;/td&gt;
      &lt;td&gt;27&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;182&lt;/th&gt;
      &lt;td&gt;17.41&lt;/td&gt;
      &lt;td&gt;28&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;183&lt;/th&gt;
      &lt;td&gt;16.42&lt;/td&gt;
      &lt;td&gt;29&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;184&lt;/th&gt;
      &lt;td&gt;28.22&lt;/td&gt;
      &lt;td&gt;30&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;185&lt;/th&gt;
      &lt;td&gt;27.52&lt;/td&gt;
      &lt;td&gt;31&lt;/td&gt;
      &lt;td&gt;330&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;186 rows × 3 columns&lt;/p&gt;
&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Basic statistical calculations&lt;/span&gt;

&lt;span class="c1"&gt;# Mean&lt;/span&gt;
&lt;span class="n"&gt;dataFrame&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Food.Pinching.Efficiency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;25.005591397849461
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This number is helpful, but the number doesn't let us know which of the chopstick lengths performed best for the thirty-one male junior college students. Let's break down the data by chopstick length. The next block of code will generate the average "Food Pinching Effeciency" for each chopstick length.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Reset_index() changes Chopstick.Length from an index to column. &lt;/span&gt;
&lt;span class="c1"&gt;# Instead of the index being the length of the chopsticks, the index is the row numbers 0, 1, 2, 3, 4, 5&lt;/span&gt;
&lt;span class="n"&gt;meansByChopstickLength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dataFrame&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groupby&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chopstick.Length&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Food.Pinching.Efficiency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reset_index&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;meansByChopstickLength&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;Chopstick.Length&lt;/th&gt;
      &lt;th&gt;Food.Pinching.Efficiency&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;180&lt;/td&gt;
      &lt;td&gt;24.935161&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;210&lt;/td&gt;
      &lt;td&gt;25.483871&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;240&lt;/td&gt;
      &lt;td&gt;26.322903&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;270&lt;/td&gt;
      &lt;td&gt;24.323871&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;300&lt;/td&gt;
      &lt;td&gt;24.968065&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;5&lt;/th&gt;
      &lt;td&gt;330&lt;/td&gt;
      &lt;td&gt;23.999677&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Plot the data&lt;/span&gt;

&lt;span class="c1"&gt;# Causes plots to display within the notebook rather than in a new window&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;pylab&lt;/span&gt; &lt;span class="n"&gt;inline&lt;/span&gt;

&lt;span class="c1"&gt;# Import library&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;

&lt;span class="c1"&gt;# Create and display scatter plot&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;meansByChopstickLength&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chopstick.Length&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;meansByChopstickLength&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Food.Pinching.Efficiency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Length in mm&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Efficiency in PPPC&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Average Food Pinching Efficiency by Chopstick Length&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Populating the interactive namespace from numpy and matplotlib
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="/images/Chopsticks_5_1.png"&gt;&lt;/p&gt;
&lt;p&gt;There is a linear relationship between the Length and Efficiency in PPPC when the length is less than 260mm. When the length becomes greater than 260mm, there is no relationship between the Length and Efficiency of PPPC.  &lt;/p&gt;
&lt;p&gt;In the abstract the researchers stated that their results showed food-pinching performance was significantly affected by the length of the chopsticks, and that chopsticks of about 240 mm long were optimal for adults. Based on that data, I agree with this claim because the efficiency in PPPC is greatest when the Length is 240mm.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content></entry><entry><title>Stock Screener</title><link href="/stock-screener.html" rel="alternate"></link><published>2015-09-07T00:00:00+00:00</published><updated>2015-09-07T00:00:00+00:00</updated><author><name></name></author><id>tag:None,2015-09-07:/stock-screener.html</id><summary type="html">&lt;h2&gt;Purpose&lt;/h2&gt;
&lt;p&gt;This script gathers ticker data on the tickers in the TickerList.csv file and calculates the following metrics:&lt;br&gt;
- Simple moving averages
- RSI
- Exponential moving averages
- MACD  &lt;/p&gt;
&lt;p&gt;Then the tickers are filtered using the following user-defined parameters:&lt;br&gt;
- MinPrice
- MaxPrice
- MinRSI 
- MaxRSI
- MinVol
- MA1 
- MA2  &lt;/p&gt;
&lt;p&gt;The technical charts of the tickers …&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Purpose&lt;/h2&gt;
&lt;p&gt;This script gathers ticker data on the tickers in the TickerList.csv file and calculates the following metrics:&lt;br&gt;
- Simple moving averages
- RSI
- Exponential moving averages
- MACD  &lt;/p&gt;
&lt;p&gt;Then the tickers are filtered using the following user-defined parameters:&lt;br&gt;
- MinPrice
- MaxPrice
- MinRSI 
- MaxRSI
- MinVol
- MA1 
- MA2  &lt;/p&gt;
&lt;p&gt;The technical charts of the tickers that meet the user-defined criteria are then displayed.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Import libraries&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;warnings&lt;/span&gt;
&lt;span class="n"&gt;warnings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filterwarnings&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ignore&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.ticker&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;mticker&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.dates&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;mdates&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.finance&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;candlestick_ohlc&lt;/span&gt;
&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rcParams&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;font.size&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pylab&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;urllib.request&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;http&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Define functions&lt;/span&gt;

&lt;span class="c1"&gt;#Define function to calculate Moving Averages&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;movingAvg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;weights&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;repeat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;
    &lt;span class="n"&gt;avg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;convolve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;weights&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;valid&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;avg&lt;/span&gt;

&lt;span class="c1"&gt;#Define function to calculate RSI&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;rsiCalc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;deltas&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;seed&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;deltas&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;seed&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;
    &lt;span class="n"&gt;down&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;seed&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;
    &lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;down&lt;/span&gt;
    &lt;span class="n"&gt;rsi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;zeros_like&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsi&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;100.&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mf"&gt;100.&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
        &lt;span class="n"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;deltas&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;upval&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;delta&lt;/span&gt;
            &lt;span class="n"&gt;downval&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;upval&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt;
            &lt;span class="n"&gt;downval&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;delta&lt;/span&gt;
        &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;upval&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;
        &lt;span class="n"&gt;down&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;down&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;downval&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;
        &lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;down&lt;/span&gt;
        &lt;span class="n"&gt;rsi&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;100.&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mf"&gt;100.&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;rsi&lt;/span&gt;

&lt;span class="c1"&gt;#Define function to calculate Exponential Moving Average    &lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;expMovingAvg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;weights&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linspace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;weights&lt;/span&gt; &lt;span class="o"&gt;/=&lt;/span&gt; &lt;span class="n"&gt;weights&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;avg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;convolve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;weights&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;full&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[:&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
    &lt;span class="n"&gt;avg&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;avg&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;avg&lt;/span&gt;

&lt;span class="c1"&gt;#Define function to calculate MACD&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;macdCalc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;slow&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fast&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;emaslow&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;expMovingAvg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;slow&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;emafast&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;expMovingAvg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fast&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;emaslow&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;emafast&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;emafast&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;emaslow&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#Define function to generate graph&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;generateGraph&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ticker&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MA1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MA2&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="c1"&gt;#Download ticker data using Yahoo! Finance API&lt;/span&gt;
    &lt;span class="n"&gt;apiURL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://chartapi.finance.yahoo.com/instrument/1.0/&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;ticker&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/chartdata;type=quote;range=2y/csv&amp;#39;&lt;/span&gt;

    &lt;span class="c1"&gt;#Create list that will store the ticker data&lt;/span&gt;
    &lt;span class="n"&gt;dataList&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

    &lt;span class="c1"&gt;#Read and parse data&lt;/span&gt;
    &lt;span class="n"&gt;fp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;urllib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apiURL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;rawData&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;utf8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;splitData&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rawData&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;eachLine&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;splitData&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="c1"&gt;#Use comma as the delimiter&lt;/span&gt;
        &lt;span class="n"&gt;splitLine&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;eachLine&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="c1"&gt;#Ignore header&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;splitLine&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;values&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;eachLine&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eachLine&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Use NumPy to load data&lt;/span&gt;
    &lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;highPrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lowPrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;openPrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;volume&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loadtxt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;delimiter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;unpack&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                                                                          &lt;span class="n"&gt;converters&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mdates&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bytespdate2num&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%Y%m&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)})&lt;/span&gt;

    &lt;span class="c1"&gt;#Create array to be plotted in Candlestick format&lt;/span&gt;
    &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;candlestickData&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;oneDayData&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;openPrice&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;highPrice&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;lowPrice&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;volume&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;candlestickData&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;oneDayData&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

    &lt;span class="c1"&gt;#Calculate the moving averages  &lt;/span&gt;
    &lt;span class="n"&gt;avg1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;movingAvg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MA1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;avg2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;movingAvg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MA2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Leave out initial data for which moving averages are not available&lt;/span&gt;
    &lt;span class="n"&gt;startingPoint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;MA2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:])&lt;/span&gt;

    &lt;span class="c1"&gt;#Make plot and define face color&lt;/span&gt;
    &lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;facecolor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#180202&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Make candlestick plot&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot2grid&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;rowspan&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colspan&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axisbg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#0d0101&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;candlestick_ohlc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;candlestickData&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colorup&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#53C156&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colordown&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#ff1717&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Define labels for the moving averages&lt;/span&gt;
    &lt;span class="n"&gt;Label1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MA1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; SMA&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;Label2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MA2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; SMA&amp;#39;&lt;/span&gt;

    &lt;span class="c1"&gt;#Plot the moving averages&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;avg1&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#deeeeb&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Label1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;avg2&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#057bff&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Label2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Turn on grid&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;grid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;#Define max x-axis ticks&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xaxis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_major_locator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mticker&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MaxNLocator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="c1"&gt;#Format dates to be more readable&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xaxis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_major_formatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mdates&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DateFormatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%Y-%m-&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="c1"&gt;#Prune upper tick&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gca&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yaxis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_major_locator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mticker&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MaxNLocator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prune&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;upper&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="c1"&gt;#Set y-axis label color&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yaxis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#c8cfd6&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;#Set label colors&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#c8cfd6&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;y&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#c8cfd6&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Price / Volume&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;#Set graph border color&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Make legend&lt;/span&gt;
    &lt;span class="n"&gt;MALegend&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;legend&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ncol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prop&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;size&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="n"&gt;fancybox&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;borderaxespad&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;shadow&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;MALegend&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_frame&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_alpha&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;legendText&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pylab&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gca&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_legend&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_texts&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;pylab&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;legendText&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Add volume&lt;/span&gt;
    &lt;span class="n"&gt;minVol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;twinx&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fill_between&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;minVol&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;volume&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;facecolor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#6b81f0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yaxis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ticklabels&lt;/span&gt;&lt;span class="p"&gt;([])&lt;/span&gt;
    &lt;span class="c1"&gt;#Set border colors&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;#Make sure volume bars do not go too high&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;volume&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="c1"&gt;#Set tick parameters&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;volPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;y&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Make RSI plot&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot2grid&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;sharex&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rowspan&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colspan&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axisbg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#0d0101&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;#Calculate RSI&lt;/span&gt;
    &lt;span class="n"&gt;rsi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rsiCalc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;posCol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#386d13&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;negCol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#8f2020&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt;&lt;span class="n"&gt;rsi&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#deeeeb&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;#Make horizontal lines at ris = 70 and rsi = 30 to represent overbought and oversold points&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;axhline&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#eafbff&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;axhline&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#eafbff&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;#Fill overbought and oversold conditions&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fill_between&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt;&lt;span class="n"&gt;rsi&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt;&lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;where&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rsi&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;facecolor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#ff0000&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;edgecolor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#ff0000&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fill_between&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt;&lt;span class="n"&gt;rsi&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;where&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rsi&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;facecolor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#00ff2b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;edgecolor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#00ff2b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;        
    &lt;span class="c1"&gt;#Set title of graph&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.018&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.98&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;RSI (14)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;va&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#FF8000&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;transform&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;transAxes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;#Set border color&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


    &lt;span class="c1"&gt;#Set tick parameters&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;y&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_yticks&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yaxis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Make MACD plot&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot2grid&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;sharex&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rowspan&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colspan&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axisbg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#0d0101&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Define MACD parameters&lt;/span&gt;
    &lt;span class="n"&gt;slow&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;26&lt;/span&gt;
    &lt;span class="n"&gt;fast&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;
    &lt;span class="n"&gt;ema&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;

    &lt;span class="c1"&gt;#Calculate MACD and Exponential Moving Average&lt;/span&gt;
    &lt;span class="n"&gt;emaslow&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;emafast&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;macd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;macdCalc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ema9&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;expMovingAvg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;macd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ema&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Plot data&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;macd&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#deeeeb&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;ema9&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#057bff&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fill_between&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;macd&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;ema9&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;startingPoint&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;facecolor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#17aee7&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;edgecolor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#17aee7&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Add chart title&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.017&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.98&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;MACD 12,26,9&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;va&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;transform&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;transAxes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;     
    &lt;span class="c1"&gt;#Set border color&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ff59bd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;#Define tick parameters&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;y&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yaxis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_major_locator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mticker&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MaxNLocator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nbins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prune&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;upper&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="c1"&gt;#Set bottom graph x labels as 45 degrees&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;macdPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xaxis&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_ticklabels&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_rotation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;45&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Set ticker as title of all graphs&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;suptitle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ticker&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Hide x labels of other plots&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;candlestickPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_xticklabels&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;visible&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rsiPlot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_xticklabels&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;visible&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Adjust the spacing of the graphs&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots_adjust&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;left&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bottom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;right&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;top&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;wspace&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hspace&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#Show plot&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Define paramaters&lt;/span&gt;
&lt;span class="n"&gt;MinPrice&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;MaxPrice&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="n"&gt;MinRSI&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;MaxRSI&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt;
&lt;span class="n"&gt;MinVol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;100000&lt;/span&gt;
&lt;span class="n"&gt;MA1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;5.0&lt;/span&gt;
&lt;span class="n"&gt;MA2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;10.0&lt;/span&gt;

&lt;span class="c1"&gt;#Open and read ticker file&lt;/span&gt;
&lt;span class="n"&gt;TickerReader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;TickerList.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;splitTickers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TickerReader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;ticker&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;splitTickers&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c1"&gt;#Download ticker data using Yahoo! Finance API&lt;/span&gt;
    &lt;span class="n"&gt;apiURL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://chartapi.finance.yahoo.com/instrument/1.0/&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;ticker&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/chartdata;type=quote;range=2y/csv&amp;#39;&lt;/span&gt;

    &lt;span class="c1"&gt;#Create list that will store the ticker data&lt;/span&gt;
    &lt;span class="n"&gt;dataList&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

    &lt;span class="c1"&gt;#Read and parse data&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;fp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;urllib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apiURL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;rawData&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;utf8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;splitData&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rawData&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;eachLine&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;splitData&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="c1"&gt;#Use comma as the delimiter&lt;/span&gt;
            &lt;span class="n"&gt;splitLine&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;eachLine&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

            &lt;span class="c1"&gt;#Ignore header&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;splitLine&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;values&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;eachLine&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eachLine&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="c1"&gt;#Use NumPy to load data&lt;/span&gt;
            &lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;highPrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lowPrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;openPrice&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;volume&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loadtxt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;delimiter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;unpack&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                                                                                  &lt;span class="n"&gt;converters&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mdates&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bytespdate2num&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%Y%m&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)})&lt;/span&gt;
            &lt;span class="c1"&gt;#Calculate RSI and average volume&lt;/span&gt;
            &lt;span class="n"&gt;RSI&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rsiCalc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;avgVol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;volume&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;volume&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

            &lt;span class="c1"&gt;#Run filter and generate graph&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MinPrice&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;closePrice&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MaxPrice&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;RSI&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MinRSI&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;RSI&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MaxRSI&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;avgVol&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MinVol&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
                &lt;span class="n"&gt;generateGraph&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ticker&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MA1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MA2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="/images/StockScreener_4_0.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/imagesStockScreener_4_1.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/StockScreener_4_2.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/StockScreener_4_3.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/StockScreener_4_4.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/StockScreener_4_5.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="png" src="/images/StockScreener_4_6.png"&gt;&lt;/p&gt;</content></entry><entry><title>Baseball Salaries Analysis</title><link href="/baseball-salaries-analysis.html" rel="alternate"></link><published>2015-03-25T00:00:00+00:00</published><updated>2015-03-25T00:00:00+00:00</updated><author><name></name></author><id>tag:None,2015-03-25:/baseball-salaries-analysis.html</id><summary type="html">&lt;p&gt;The Baseball Data was used to answer the following questions:&lt;br&gt;
Are salaries higher in 2015 than in 1985?&lt;br&gt;
Does the mean salary increase with the year?&lt;br&gt;
Do a player salaries have a higher correlation with total runs or homeruns?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Import packages&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;csv&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;The Baseball Data was used to answer the following questions:&lt;br&gt;
Are salaries higher in 2015 than in 1985?&lt;br&gt;
Does the mean salary increase with the year?&lt;br&gt;
Do a player salaries have a higher correlation with total runs or homeruns?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Import packages&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;csv&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pylab&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;P&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt; &lt;span class="n"&gt;inline&lt;/span&gt;

&lt;span class="c1"&gt;# Use pandas csv reader to read in the salary data&lt;/span&gt;
&lt;span class="n"&gt;salary_df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Data/Salaries.csv&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;header&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Question: Are salaries higher in 2015 than in 1985?&lt;/span&gt;

&lt;span class="c1"&gt;# Compare salary statistics between 1985 and 2015&lt;/span&gt;
&lt;span class="n"&gt;salaryData_1985&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;salary_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;salary_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yearID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1985&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;salaryData_2015&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;salary_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;salary_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yearID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;2015&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;The median salary in 1985 is $&lt;/span&gt;&lt;span class="si"&gt;%.2f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;median&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salaryData_1985&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;The median salary in 2015 is $&lt;/span&gt;&lt;span class="si"&gt;%.2f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;median&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salaryData_2015&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;The mean salary in 1985 is $&lt;/span&gt;&lt;span class="si"&gt;%.2f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salaryData_1985&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;The mean salary in 2015 is $&lt;/span&gt;&lt;span class="si"&gt;%.2f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salaryData_2015&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;The max salary in 1985 is $&lt;/span&gt;&lt;span class="si"&gt;%.2f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;amax&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salaryData_1985&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;The max salary in 2015 is $&lt;/span&gt;&lt;span class="si"&gt;%.2f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;amax&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salaryData_2015&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;# Look at the distribution of the salary data&lt;/span&gt;
&lt;span class="c1"&gt;# Plot histrograms of 1985 and 2015 salaries&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;211&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Histogram of Salary data in 1985 and 2015&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salaryData_1985&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Frequency - 1985&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;212&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salaryData_1985&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Frequency - 2015&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;The median salary in 1985 is $400000.00
The median salary in 2015 is $1880000.00
The mean salary in 1985 is $476299.45
The mean salary in 2015 is $4301276.09
The max salary in 1985 is $2130300.00
The max salary in 2015 is $32571000.00
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="/images/BaseballSalariesAnalysis_1_1.png"&gt;&lt;/p&gt;
&lt;p&gt;The salaries are tentatively higher in 2015 than in 1985.&lt;br&gt;
The histograms were plotted to see the distibution of our salaries. The fact that the distribution is not normal, but instead right skewed, gives us an idea of the type of model we can use if we wanted to develop a predictive model to determine the salaries.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Question: Does the mean salary increase with the year?&lt;/span&gt;

&lt;span class="c1"&gt;# Get all the unique years in the dataset&lt;/span&gt;
&lt;span class="n"&gt;years&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unique&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yearID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="c1"&gt;# Initialize empty list to store mean salaries&lt;/span&gt;
&lt;span class="n"&gt;mean_salary&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

&lt;span class="c1"&gt;# Get average salary for each year&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;each_year&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;years&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;year_salaries&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;salary_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;salary_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yearID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;each_year&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;mean_salary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;year_salaries&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;# Convert mean salaries list to numpy array&lt;/span&gt;
&lt;span class="n"&gt;mean_salary&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mean_salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Plot the year vs. mean salary line plot&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;years&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mean_salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Year&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Mean Salary ($)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="/images/BaseballSalariesAnalysis_3_0.png"&gt;&lt;/p&gt;
&lt;p&gt;The long term trend shows that the mean salary tends to increase over time.&lt;br&gt;
A line graph was plotted so that we can see the relationship between year and the mean salary. Although the relationship between year and mean salary is not perfectly linear, we can still get away by using a basic linear model if we wanted to develop a predictive model. One can also argue that the curve is non-linear and we may have to go beyond the basic linear model if we were to develop a predictive model.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Question: Do a player salaries have a higher correlation with total runs or homeruns?&lt;/span&gt;

&lt;span class="c1"&gt;# Define function to calculate correlations&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;correlations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DF&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;VarA&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;VarB&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;#Inputs: Dataframe, Variable A and Variable B&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;DF&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;VarA&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;corr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DF&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;VarB&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="c1"&gt;# Use pandas csv reader to read in the batting and salary data&lt;/span&gt;
&lt;span class="n"&gt;batting_df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Data/Batting.csv&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;header&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;salary_df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Data/Salaries.csv&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;header&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Look at the unique years in which the data for &lt;/span&gt;
&lt;span class="c1"&gt;# runs and homeruns is missing&lt;/span&gt;
&lt;span class="n"&gt;missing_runs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;R&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isnull&lt;/span&gt;&lt;span class="p"&gt;()][[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yearID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;span class="n"&gt;unique_missing_runs_years&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unique&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;missing_runs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yearID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;There are missing values for runs in years &lt;/span&gt;&lt;span class="si"&gt;%.0f&lt;/span&gt;&lt;span class="s1"&gt; - &lt;/span&gt;&lt;span class="si"&gt;%.0f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; \
      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;unique_missing_runs_years&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;unique_missing_runs_years&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;

&lt;span class="n"&gt;missing_homeruns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HR&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isnull&lt;/span&gt;&lt;span class="p"&gt;()][[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yearID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;span class="n"&gt;unique_missing_homeruns_years&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unique&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;missing_homeruns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yearID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;There are missing values for homeruns in years &lt;/span&gt;&lt;span class="si"&gt;%.0f&lt;/span&gt;&lt;span class="s1"&gt; - &lt;/span&gt;&lt;span class="si"&gt;%.0f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; \
      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;unique_missing_homeruns_years&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;unique_missing_homeruns_years&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;

&lt;span class="c1"&gt;# Data Cleaning&lt;/span&gt;

&lt;span class="c1"&gt;# Create a new column duplicating the runs and homeruns columns and &lt;/span&gt;
&lt;span class="c1"&gt;# replacing missing runs and homeruns data with 0s&lt;/span&gt;
&lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Runs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;R&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Runs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isnull&lt;/span&gt;&lt;span class="p"&gt;()]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HomeRuns&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HR&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HomeRuns&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isnull&lt;/span&gt;&lt;span class="p"&gt;()]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="c1"&gt;# Data Analysis&lt;/span&gt;

&lt;span class="c1"&gt;# Merge the batting and salary dataframes&lt;/span&gt;
&lt;span class="n"&gt;dfMerged&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;merge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;batting_df&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary_df&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yearID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;playerID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;how&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;inner&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Calculate correlations between Runs / Homeruns and Salary&lt;/span&gt;
&lt;span class="n"&gt;Runs_Salary_Corr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;correlations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dfMerged&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Runs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;HomeRuns_Salary_Corr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;correlations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dfMerged&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;HomeRuns&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;salary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Results&lt;/span&gt;

&lt;span class="c1"&gt;# Print out the results&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;The correlation between a player&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;s total runs and salary is &lt;/span&gt;&lt;span class="si"&gt;%.2f&lt;/span&gt;&lt;span class="s1"&gt; &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;Runs_Salary_Corr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;The correlation between a player&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;s homeruns and salary is &lt;/span&gt;&lt;span class="si"&gt;%.2f&lt;/span&gt;&lt;span class="s1"&gt; &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;HomeRuns_Salary_Corr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;There are missing values for runs in years 1973 - 1999
There are missing values for homeruns in years 1973 - 1999

The correlation between a player&amp;#39;s total runs and salary is 0.22 
The correlation between a player&amp;#39;s homeruns and salary is 0.27
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Player salaries have a higher correlation with homeruns than total runs.&lt;br&gt;
Limitations: The missing missing values for total runs and homeruns was replaced with zeros. This method may not reflect reality. Other ways to deal with missing missing data for total runs and homeruns could be:&lt;br&gt;
1. Replace the missing values with mean values instead of zeros&lt;br&gt;
2. Completely remove all items where there are any missing values&lt;br&gt;
3. Interpolate the values  &lt;/p&gt;
&lt;p&gt;Further steps include adding confidence intervals when caclulating average salary values so that we can be aware of the uncertainty in our calculations.&lt;br&gt;
The correlations were calculated to get an idea of whether the total runs or homeruns would be good features to include in a model if we were to develop a predictive model. The limitation of doing correlations on single variables like we did above is that the combined impact of multiple variables is not considered.&lt;/p&gt;</content></entry></feed>
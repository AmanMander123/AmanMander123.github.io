<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>A Pelican Blog</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog </a></h1>
                <nav><ul>
                    <li><a href="/category/data-analysis.html">Data Analysis</a></li>
                    <li><a href="/category/finance.html">Finance</a></li>
                    <li><a href="/category/introduction.html">Introduction</a></li>
                    <li><a href="/category/visualization.html">Visualization</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/titanic-dataset-visualization.html">

    
        
        
        
        Titanic Dataset Visualization</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-09-14T00:00:00+00:00">
                Published: Wed 14 September 2016
        </abbr>

<p>In <a href="/category/visualization.html">Visualization</a>.</p>

</footer><!-- /.post-info -->
        <script type="text/javascript">
            
function draw(data) {

  //Set variables for width and height of svg element
  w = 1200;
  h = 500;

  //Get unique values for Sex, Pclass and Embarked
  var uniqueSex = d3.map(data, function(d){return d["Sex"];}).keys()
  var uniquePclass = d3.map(data, function(d){return d["Pclass"];}).keys()
  var uniqueEmbarked = d3.map(data, function(d){return d["Embarked"];}).keys()

  
  //Clean the values - eliminate any blanks or undefined values
  //Function to clean the values
  function cleaner(arr) {
    var filteredArray = arr.filter(Boolean);
    var filteredArray = filteredArray.filter(function(n) { return n != "undefined" });
    return filteredArray;
  }

  //Pass the variables through the cleaner function
  uniqueSex = cleaner(uniqueSex);
  uniquePclass = cleaner(uniquePclass);
  uniqueEmbarked = cleaner(uniqueEmbarked);

  //Create an array containing data on the unique sex values in the dataset
  var sexData = []
  var sexSurvived = []
  var sexSurvivedPercent = []
  for (var i = 0; i < uniqueSex.length; i++) {
    sexData[i] = data.filter(function(d) { return d["Sex"] == uniqueSex[i]});
    sexSurvived[i] = d3.sum(sexData[i], function(d) {return parseFloat(d["Survived"])});
    sexSurvivedPercent[i] = sexSurvived[i] / sexData[i].length * 100
  }

  //Create an array containing data on the unique Pclass values in the dataset
  var PclassData = []
  var PclassSurvived = []
  var PclassSurvivedPercent = []
  for (var i = 0; i < uniquePclass.length; i++) {
    PclassData[i] = data.filter(function(d) { return d["Pclass"] == uniquePclass[i]});
    PclassSurvived[i] = d3.sum(PclassData[i], function(d) {return parseFloat(d["Survived"])});
    PclassSurvivedPercent[i] = PclassSurvived[i] / PclassData[i].length * 100
  }

  //Create an array containing data on the unique Embarked values in the dataset
  var EmbarkedData = []
  var EmbarkedSurvived = []
  var EmbarkedSurvivedPercent = []
  for (var i = 0; i < uniqueEmbarked.length; i++) {
    EmbarkedData[i] = data.filter(function(d) { return d["Embarked"] == uniqueEmbarked[i]});
    EmbarkedSurvived[i] = d3.sum(EmbarkedData[i], function(d) {return parseFloat(d["Survived"])});
    EmbarkedSurvivedPercent[i] = EmbarkedSurvived[i] / EmbarkedData[i].length * 100
  }

  //Create object of all Suvival Data
  var SurvivalData = [ { key: "Male", value: sexSurvivedPercent[0], survivedCount: sexSurvived[0]},
                        { key: "Female", value: sexSurvivedPercent[1], survivedCount: sexSurvived[1]},
                         { key: "1st Class", value: PclassSurvivedPercent[0], survivedCount: PclassSurvived[0]},
                         { key: "2nd Class", value: PclassSurvivedPercent[1], survivedCount: PclassSurvived[1]},
                         { key: "3rd Class", value: PclassSurvivedPercent[2], survivedCount: PclassSurvived[2]},
                         { key: "Port S", value: EmbarkedSurvivedPercent[0], survivedCount: EmbarkedSurvived[0]},
                         { key: "Port C", value: EmbarkedSurvivedPercent[1], survivedCount: EmbarkedSurvived[1]},
                         { key: "Port Q", value: EmbarkedSurvivedPercent[2], survivedCount: EmbarkedSurvived[2]}
                         ]

  //Define key function, to be used when binding data
  var key = function(d) {
              return d.key;
  };

// Define the div for the tooltip
var div = d3.select("body").append("div") 
    .attr("class", "tooltip")       
    .style("opacity", 0);

  //Create SVG element
  var svg = d3.select("body")
               .append("svg")
               .attr("width", w)
               .attr("height", h);

  //Create the circles on the svg element
  var circles = svg.selectAll("circle")
                   .data(SurvivalData, key)
                   .enter()
                   .append("circle");

  //Assign the attributes to the circles
  circles.attr("cx", function(d, i) {
                       return (150 * i) + 100;
                    })
                   .attr("cy", h/2)
                   .attr("r", function(d) {
                        return Math.sqrt(d.value) * 8;
                   })
                   .attr("fill", "#AEC6CF")
                   .on("mouseover", function(d) {   
                      div.transition()    
                         .duration(200)    
                         .style("opacity", .9);    
                      div.html(d.key + "<br/>"  + d3.format(".2f")(d.value) + "%" + "<br/>" + "Count: " + d.survivedCount)  
                          .style("left", (d3.event.pageX) + "px")   
                          .style("top", (d3.event.pageY) + "px");  
                  })          
                  .on("mouseout", function(d) {   
                      div.transition()    
                         .duration(500)    
                         .style("opacity", 0); 
        });

  //Create labels
  svg.selectAll("text")
      .data(SurvivalData, key)    //Bind data with custom key function
      .enter()
      .append("text")
      .text(function(d) {
            return d.key
        })
      .attr("text-anchor", "middle")
      .attr("x", function(d, i) {
            return (150 * i) + 100;
         })
      .attr("y", h/2)
      .attr("font-family", "sans-serif")
      .attr("font-size", "11px")
      .attr("fill", "white");

  //Add title
  svg.append("text")
      .attr("x", (w / 2))             
      .attr("y", 50)
      .attr("text-anchor", "middle")  
      .style("font-size", "30px") 
      .style("text-decoration", "underline")  
      .text("Titanic Disaster Survival Rate")

  svg.append("text")
      .attr("x", (w / 2))             
      .attr("y", 100)
      .attr("text-anchor", "middle")  
      .style("font-size", "30px") 
      .style("text-decoration", "underline")  
      .text("By Sex, Passenger Class and Port of Embarkation")

  //Add text to describe meaning of Port letters
  svg.append("text")
      .attr("x", (w / 2))             
      .attr("y", h - 50)
      .attr("text-anchor", "middle")  
      .style("font-size", "20px") 
      .text("Port S = Southampton, Port C = Cherbourg, Post Q = Queenstown")

  //Add lines between the sex, passenger class and port of embarkation to separate the categories
  svg.append("line")
  .attr("x1", (150 * 1) + 175)  
  .attr("y1", 120)
  .attr("x2", (150 * 1) + 175)    
  .attr("y2", h - 100)
  .style("stroke-width", 2)
  .style("stroke", "black")
  .style("fill", "none");

  svg.append("line")
  .attr("x1", (150 * 4) + 175)  
  .attr("y1", 120)
  .attr("x2", (150 * 4) + 175)    
  .attr("y2", h - 100)
  .style("stroke-width", 2)
  .style("stroke", "black")
  .style("fill", "none");
}

//Call the draw function
d3.csv("titanic_data.csv", draw);

        </script>
                    </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/financial-contributions-to-the-2016-presidential-campaigns-from-ny.html" rel="bookmark"
                           title="Permalink to Financial Contributions to the 2016 Presidential Campaigns from NY">Financial Contributions to the 2016 Presidential Campaigns from NY</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-05-17T00:00:00+00:00">
                Published: Tue 17 May 2016
        </abbr>

<p>In <a href="/category/data-analysis.html">Data Analysis</a>.</p>

</footer><!-- /.post-info -->                <p>========================================================</p>
<div class="highlight"><pre><span></span><span class="cp">#</span><span class="nf">Load</span><span class="x"> libraries</span>
<span class="x">library(ggplot2)</span>
<span class="x">library(lubridate)</span>
<span class="x">library(dplyr)</span>
<span class="x">library(tidyr)</span>
<span class="x">library(gridExtra)</span>
<span class="x">library(psych)</span>

<span class="err">#</span><span class="x"> Load the Data</span>
<span class="x">data = read.csv(&#39;NYContributionData.csv&#39;, row.names = NULL)</span>
<span class="cp">#</span><span class="nf">Convert</span><span class="x"> dates from integers to DD-MM-YYYY format</span>
<span class="x">data</span><span class="p">$</span><span class="nv">contb_receipt_dt</span><span class="x"> = dmy(data</span><span class="p">$</span><span class="nv">contb_receipt_dt</span><span class="x">)</span>
</pre></div>


<h1>Univariate Plots Section</h1>
<div class="highlight"><pre><span></span><span class="err">#</span><span class="x"> Summarize the data set</span>
<span class="x">dim(data)</span>

<span class="cp">##</span><span class="c"> [1] 186976     18</span><span class="x"></span>

<span class="x">names …</span></pre></div>
                <a class="readmore" href="/financial-contributions-to-the-2016-presidential-campaigns-from-ny.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/udacity-engagement-analysis.html" rel="bookmark"
                           title="Permalink to Udacity Engagement Analysis">Udacity Engagement Analysis</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-03-16T00:00:00+00:00">
                Published: Wed 16 March 2016
        </abbr>

<p>In <a href="/category/data-analysis.html">Data Analysis</a>.</p>

</footer><!-- /.post-info -->                <h2>Loading Data from CSVs</h2>
<div class="highlight"><pre><span></span><span class="c1"># Import csv library</span>
<span class="kn">import</span> <span class="nn">unicodecsv</span>

<span class="c1"># Define function to read and store data</span>
<span class="k">def</span> <span class="nf">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">unicodecsv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

<span class="n">enrollments</span> <span class="o">=</span> <span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/enrollments.csv&#39;</span><span class="p">)</span>
<span class="n">daily_engagement</span> <span class="o">=</span> <span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/daily_engagement.csv&#39;</span><span class="p">)</span>
<span class="n">project_submissions</span> <span class="o">=</span> <span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/project_submissions.csv&#39;</span><span class="p">)</span>

<span class="c1"># Print out first …</span></pre></div>
                <a class="readmore" href="/udacity-engagement-analysis.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/introduction-to-research-methods.html" rel="bookmark"
                           title="Permalink to Introduction to Research Methods">Introduction to Research Methods</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-09-19T00:00:00+00:00">
                Published: Sat 19 September 2015
        </abbr>

<p>In <a href="/category/introduction.html">Introduction</a>.</p>

</footer><!-- /.post-info -->                <h1>Introduction To Research Methods</h1>
<h2>Chopsticks</h2>
<p>A few researchers set out to determine the optimal length of chopsticks for children and adults. They came up with a measure of how effective a pair of chopsticks performed, called the "Food Pinching Performance." The "Food Pinching Performance" was determined by counting the number …</p>
                <a class="readmore" href="/introduction-to-research-methods.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/stock-screener.html" rel="bookmark"
                           title="Permalink to Stock Screener">Stock Screener</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-09-07T00:00:00+00:00">
                Published: Mon 07 September 2015
        </abbr>

<p>In <a href="/category/finance.html">Finance</a>.</p>

</footer><!-- /.post-info -->                <div class="highlight"><pre><span></span><span class="c1"># Import libraries</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="kn">as</span> <span class="nn">mticker</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="kn">as</span> <span class="nn">mdates</span>
<span class="kn">from</span> <span class="nn">matplotlib.finance</span> <span class="kn">import</span> <span class="n">candlestick_ohlc</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="kn">import</span> <span class="nn">pylab</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">http …</span></pre></div>
                <a class="readmore" href="/stock-screener.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/baseball-salaries-analysis.html" rel="bookmark"
                           title="Permalink to Baseball Salaries Analysis">Baseball Salaries Analysis</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-03-25T00:00:00+00:00">
                Published: Wed 25 March 2015
        </abbr>

<p>In <a href="/category/data-analysis.html">Data Analysis</a>.</p>

</footer><!-- /.post-info -->                <p>The Baseball Data was used to answer the following questions:<br>
Are salaries higher in 2015 than in 1985?<br>
Does the mean salary increase with the year?<br>
Do a player salaries have a higher correlation with total runs or homeruns?</p>
<div class="highlight"><pre><span></span><span class="c1"># Import packages</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as …</span></pre></div>
                <a class="readmore" href="/baseball-salaries-analysis.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>